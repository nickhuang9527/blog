<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://nickhuangcyh.github.io/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://nickhuangcyh.github.io/blog/" rel="alternate" type="text/html" /><updated>2022-07-21T02:29:36+00:00</updated><id>https://nickhuangcyh.github.io/blog/feed.xml</id><title type="html">Nickâ€™s Blog</title><subtitle>An amazing website.</subtitle><author><name>Nick Huang</name></author><entry><title type="html">Design Pattern ç³»åˆ— (6) - Abstract Factory Pattern</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-6-abstract-factory-pattern/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (6) - Abstract Factory Pattern" /><published>2022-02-21T17:00:00+00:00</published><updated>2022-02-21T17:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-6-abstract-factory-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-6-abstract-factory-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘å€‘åˆ©ç”¨ &lt;a href=&quot;% post_url 2022-02-19-design-pattern-5-factory-method-pattern %}&quot;&gt;å·¥å» æ–¹æ³•æ¨¡å¼&lt;/a&gt; è®“åˆ†åº—å¯ä»¥å®¢è£½åŒ–é£²å“ä½¿ç”¨çš„åŸæ–™ï¼Œä¹Ÿéµå®ˆäº† &lt;strong&gt;é–‹æ”¾å°é–‰åŸå‰‡&lt;/strong&gt; ä½¿æˆ‘å€‘å¯ä»¥å¾ˆè¼•æ˜“åœ°æ·»åŠ å…¶ä»–åˆ†åº—ï¼Œè€Œä¸æ”¹è®Šå·²ç¶“å­˜åœ¨çš„ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;p&gt;è©¦æƒ³ä¸€ä¸‹å‡å¦‚é£²æ–™èœå–®æ–°å¢çš„é£²å“è¶Šä¾†è¶Šå¤šï¼Œåˆ†åº—ä¹Ÿè¶Šä¾†è¶Šå¤šï¼Œå¤§å®¶æ‡‰è©²æœƒç™¼ç¾åˆ°ï¼Œå„åˆ†åº—çš„å·¥å» æ‰€è¦å¢åŠ çš„å“é …åˆ¤æ–·ä¹Ÿæœƒè¶Šä¾†è¶Šå¤šã€‚&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;d64d4063-909c-4656-adde-8412305cd665&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;d64d4063-909c-4656-adde-8412305cd665&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/4efb9daca505d9a30c28c8c058d75f8b.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/b04fdc28c516d947869c8e9d789cc1ca.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å¦‚ä½•è™•ç†å¤šå€‹ç”¢å“åœ¨ä¸åŒåˆ†åº—çš„çµ„åˆï¼Œé€™æ™‚å°±éœ€è¦ç”¨åˆ° &lt;strong&gt;Abstract Factory Pattern&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;abstract-factory-pattern&quot;&gt;Abstract Factory Pattern&lt;/h2&gt;

&lt;p&gt;é€éå°‡å·¥å» æŠ½è±¡ï¼Œä½¿å­é¡åˆ¥èƒ½å‰µå»ºä¸€ç³»åˆ—çš„å¯¦é«”ç‰©ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æŠ½è±¡å·¥å» æœ‰å€‹é‡è¦çš„åˆ¤æ–·æ–¹å¼ï¼Œç•¶ä½ æ‰€è¦å‰µå»ºçš„ç”¢å“æ˜¯ä¸€æ•´å€‹ç³»åˆ—ç”¢å“ï¼Œä¸”ä¸åŒéœ€æ±‚è¦å‰µå»ºä¸åŒç³»åˆ—ï¼Œé€™å€‹é—œä¿‚èƒ½å¤ ç•«æˆäºŒç¶­é—œä¿‚ï¼Œé€™æ™‚å°±éå¸¸é©åˆä½¿ç”¨æŠ½è±¡å·¥å» ä¾†å»ºç«‹ç”¢å“&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹åœ–&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Country / Tea&lt;/th&gt;
      &lt;th&gt;BlackTea&lt;/th&gt;
      &lt;th&gt;GreenTea&lt;/th&gt;
      &lt;th&gt;MilkTea&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;US Flavor&lt;/td&gt;
      &lt;td&gt;Ceylon(éŒ«è˜­)&lt;/td&gt;
      &lt;td&gt;Gyokuro(ç‰éœ²)&lt;/td&gt;
      &lt;td&gt;Thai (æ³°å¥¶)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;EU Flavor&lt;/td&gt;
      &lt;td&gt;EarlGrey(ä¼¯çˆµ)&lt;/td&gt;
      &lt;td&gt;Sencha(ç…èŒ¶)&lt;/td&gt;
      &lt;td&gt;Masala Chai (å°åº¦é¦¬è–©æ‹‰))&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;JP Flavor&lt;/td&gt;
      &lt;td&gt;Assam(é˜¿è–©å§†)&lt;/td&gt;
      &lt;td&gt;Matcha(æŠ¹èŒ¶)&lt;/td&gt;
      &lt;td&gt;Hokkaido(åŒ—æµ·é“å¥¶èŒ¶)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è®“æˆ‘å€‘æ ¹æ“šä¸Šé¢çš„èŒ¶å®¶æ—ä¿®æ”¹ä¸€ä¸‹ UML åŠç¨‹å¼ç¢¼å§(é€™é‚Šåªæ˜¯è¦è¡¨é”äºŒç¶­é—œä¿‚çš„æ¦‚å¿µï¼Œåƒ…å…ˆå¯¦ä½œç´…èŒ¶åŠç¶ èŒ¶çš„éƒ¨åˆ†)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_6_abstract_factory_pattern_uml_1.png&quot; alt=&quot;design_pattern_6_abstract_factory_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;bf92fdca-bd70-4c30-8bed-3f53690c59a0&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;bf92fdca-bd70-4c30-8bed-3f53690c59a0&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/49cf3ff30b5ea2766cd540a1146316ae.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/2b53e517b1132044ebec95f4057a1a54.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä½¿ç”¨æŠ½è±¡å·¥å» å¾Œï¼Œåˆ†åº—ä¸éœ€è¦çŸ¥é“å¯¦éš›æ˜¯ä»€éº¼èŒ¶ï¼Œåªè¦çŸ¥é“è·Ÿè‡ªå·±åœ°å€çš„é£²æ–™å·¥å» å–å¾— ç´…/ç¶ /å¥¶èŒ¶ï¼Œé€™é‚Šä¹Ÿé‹ç”¨åˆ°äº† Dependency Inversion Principleï¼Œå·¥å» åŠç”¢å“å…©è€…çš†ä¾è³´æ–¼æŠ½è±¡ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢èˆ‰å¹¾ç¨®äºŒç¶­é—œä¿‚å¯ä»¥ä½¿ç”¨ Abstract Factory Pattern çš„ä¾‹å­&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;åšè·¨å¹³å°æ‡‰ç”¨æ™‚ï¼Œæœƒé‡åˆ°ä¸åŒå¹³å°èˆ‡å„ç¨® UI å…ƒä»¶çš„çµ„åˆ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;OS / UI Components&lt;/th&gt;
      &lt;th&gt;Button&lt;/th&gt;
      &lt;th&gt;Checkbox&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Linux&lt;/td&gt;
      &lt;td&gt;LinuxButton&lt;/td&gt;
      &lt;td&gt;LinuxCheckbox&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MacOS&lt;/td&gt;
      &lt;td&gt;MacButton&lt;/td&gt;
      &lt;td&gt;MacCheckbox&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows&lt;/td&gt;
      &lt;td&gt;WinButton&lt;/td&gt;
      &lt;td&gt;WinCheckbox&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;åš App æ™‚ï¼Œæœƒé‡åˆ°éœ€è¦æ”¯æŒ Light/Dark Mode èˆ‡å„ç¨® UI å…ƒä»¶çš„çµ„åˆ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Theme / UI Components&lt;/th&gt;
      &lt;th&gt;Button&lt;/th&gt;
      &lt;th&gt;Checkbox&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Light Mode&lt;/td&gt;
      &lt;td&gt;LightModeButton&lt;/td&gt;
      &lt;td&gt;LightModeCheckbox&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Dark Mode&lt;/td&gt;
      &lt;td&gt;DarkModeButton&lt;/td&gt;
      &lt;td&gt;DarkModeCheckbox&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;åš IoT ç³»çµ±æ™‚ï¼Œæœƒé‡åˆ° ZWave/Zigbeee å‚³è¼¸å”è­°èˆ‡å„ç¨® Iot è£ç½®çš„çµ„åˆ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Protocol / Device&lt;/th&gt;
      &lt;th&gt;Dimmer&lt;/th&gt;
      &lt;th&gt;Hue&lt;/th&gt;
      &lt;th&gt;Thermostat&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;ZWave&lt;/td&gt;
      &lt;td&gt;ZWDimmer&lt;/td&gt;
      &lt;td&gt;ZWHue&lt;/td&gt;
      &lt;td&gt;ZWThermostat&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Zigbee&lt;/td&gt;
      &lt;td&gt;ZBDimmer&lt;/td&gt;
      &lt;td&gt;ZBHue&lt;/td&gt;
      &lt;td&gt;ZBThermostat&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;uml&quot;&gt;UML&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_6_abstract_factory_pattern_uml_2.png&quot; alt=&quot;design_pattern_6_abstract_factory_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;factory-method-pattern-vs-abstract-factory-pattern&quot;&gt;Factory Method Pattern vs Abstract Factory Pattern&lt;/h2&gt;

&lt;h3 id=&quot;factory-method-pattern-å·¥å» æ–¹æ³•æ¨¡å¼&quot;&gt;Factory Method Pattern å·¥å» æ–¹æ³•æ¨¡å¼&lt;/h3&gt;

&lt;p&gt;å°æ¯ä¸€ç¨®ç”¢å“æä¾›ç›¸æ‡‰çš„å·¥å» å»å»ºç«‹ç”¢å“ï¼Œç”¢å“æ“´å……æ€§é«˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;abstract-factory-pattern-æŠ½è±¡å·¥å» æ¨¡å¼&quot;&gt;Abstract Factory Pattern æŠ½è±¡å·¥å» æ¨¡å¼&lt;/h3&gt;

&lt;p&gt;å°ä¸€æ•´å€‹ç³»åˆ—çš„ç”¢å“é€²è¡ŒæŠ½è±¡å»ºç«‹ï¼Œå·¥å» æ“´å……æ€§é«˜ï¼Œå¦‚åŠ å…¥æ–°çš„ç³»åˆ—ç”¢å“ï¼Œä½†ç”¢å“æ“´å……æ€§ä½ï¼Œæ‰€æœ‰çš„å·¥å» éƒ½å¿…é ˆåŠ å…¥æ–°ç”¢å“ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘ä¾†çœ‹çœ‹å·¥å» æ–¹æ³•ç”¨åˆ°å“ªäº› &lt;a href=&quot;/blog/design%20pattern/design-pattern-1-design-principle/&quot;&gt;Design Principle&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Encapsulate What Varies&lt;/li&gt;
  &lt;li&gt;Loose Coupling&lt;/li&gt;
  &lt;li&gt;Program to Interfaces&lt;/li&gt;
  &lt;li&gt;Single Responsibility Principle&lt;/li&gt;
  &lt;li&gt;Open Closed Principle&lt;/li&gt;
  &lt;li&gt;Dependency Inversion Principle&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://refactoring.guru/design-patterns/factory-method&quot;&gt;refactoring&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Abstract Factory Pattern" /><summary type="html">é€éå°‡å·¥å» æŠ½è±¡ï¼Œä½¿å­é¡åˆ¥èƒ½å‰µå»ºä¸€ç³»åˆ—çš„å¯¦é«”ç‰©ä»¶ã€‚</summary></entry><entry><title type="html">Design Pattern ç³»åˆ— (5) - Factory Method Pattern</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-5-factory-method-pattern/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (5) - Factory Method Pattern" /><published>2022-02-19T09:20:00+00:00</published><updated>2022-02-19T09:20:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-5-factory-method-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-5-factory-method-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘å€‘åˆ©ç”¨ &lt;a href=&quot;% post_url 2022-02-13-design-pattern-4-simple-factory-pattern %}&quot;&gt;ç°¡å–®å·¥å» æ¨¡å¼&lt;/a&gt;æˆåŠŸåœ°å°‡ &lt;strong&gt;éœ€è¦è®Šå‹•&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;ä¸éœ€è®Šå‹•&lt;/strong&gt; çš„ç¨‹å¼ç¢¼åˆ†é›¢ã€‚&lt;/p&gt;

&lt;p&gt;é£²æ–™é»é¤ç³»çµ±å—åˆ°å®¢æˆ¶çš„å–œæ„›ï¼Œæ¥­ç¸¾éå¸¸å¥½ï¼Œæ–¼æ˜¯å®¢æˆ¶åœ¨ä¸–ç•Œå„åœ°è¿…é€Ÿæ“´åº—ï¼Œä½†å¾ˆå¿«çš„å•é¡Œå‡ºç¾äº†ã€‚&lt;/p&gt;

&lt;p&gt;å› ç‚ºä¸–ç•Œå„åœ°çš„äººæœ‰ä¸åŒçš„åå¥½ï¼Œåˆ†åº—é–‹å§‹åæ‡‰ï¼Œè©²åœ°å€çš„é¡§å®¢ä¸å–œæ­¡ç›®å‰æ­£åœ¨ä½¿ç”¨çš„ç´…èŒ¶ç¶ èŒ¶ä¹‹èŒ¶è‘‰ï¼Œå¸Œæœ›æ›¿æ›è©²å€å–œæ„›çš„èŒ¶è‘‰&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚: ç¾åœ‹å–œæ­¡éŒ«è˜­ç´…èŒ¶ã€æ­æ´²å–œæ­¡ä¼¯çˆµç´…èŒ¶&lt;/p&gt;

&lt;p&gt;(æˆæœ¬è€ƒé‡æˆ‘å€‘ä¸å°‡æ‰€æœ‰ç´…èŒ¶ç¨®é¡éƒ½åŠ å…¥èœå–®ï¼Œåªç”¨æœ€ç¬¦åˆç•¶åœ°å£å‘³çš„èŒ¶è‘‰è£½ä½œç´…èŒ¶)&lt;/p&gt;

&lt;p&gt;æ–¼æ˜¯æˆ‘å€‘ä¿®æ”¹ç°¡å–®å·¥å» çš„ç¨‹å¼ç¢¼ï¼Œæ–°å¢ USBeverageFactory åŠ EUBeverageFactory ä¾†è£½ä½œç¬¦åˆç¾åœ‹åŠæ­æ´²ç•¶åœ°å£å‘³çš„é£²å“&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;62329449-6198-43a0-b61e-4acbbd30384a&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;62329449-6198-43a0-b61e-4acbbd30384a&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/5c03101f45a1144fffbd5173d906d286.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/47bcb79696354e083cdc99a8d53c22cb.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;é€™æ¨£åšé›–ç„¶å¯ä»¥æ»¿è¶³åˆ†åº—å¾ä¸åŒå·¥å» å–å¾—è©²åœ°å€çš„é£²å“ï¼Œä½†æ¯ç•¶æœ‰æ–°çš„åˆ†åº—åŠ å…¥ï¼Œå°±å¿…é ˆå‹•åˆ° BeverageShop çš„ç¨‹å¼ç¢¼ä¾†æ·»åŠ æ–°çš„åˆ†åº—å·¥å» ï¼Œé•åäº† &lt;strong&gt;Open Closed Principle&lt;/strong&gt;ï¼Œå¦‚ä½•è§£æ±ºå°±è¦ä»‹ç´¹ä»Šå¤©çš„ä¸»è§’ &lt;strong&gt;Factory Method Pattern&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;factory-method-pattern&quot;&gt;Factory Method Pattern&lt;/h2&gt;

&lt;p&gt;æä¾›ä¸€å€‹ä»‹é¢ç”¨ä¾†å‰µå»ºç‰©ä»¶ï¼ŒçœŸæ­£å¯¦é«”åŒ–çš„é¡åˆ¥ç”±å­é¡åˆ¥å¯¦ä½œæ±ºå®šã€‚
è®“æˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ UML åŠç¨‹å¼ç¢¼å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_5_factory_method_pattern_uml_1.png&quot; alt=&quot;design_pattern_5_factory_method_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;303d67b0-8183-4b5b-8170-b52b0758c2d4&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;303d67b0-8183-4b5b-8170-b52b0758c2d4&quot; data-name=&quot;data-struct&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/2504aa439c085480b77a709e1304b141.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/f9d13d1e1bbb7d1736c031e5e3cd2e26.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;é€éå·¥å» æ–¹æ³•æ¨¡å¼ï¼Œæˆ‘å€‘é€éå°‡å·¥å» æŠ½è±¡åŒ–ï¼Œé”åˆ°å¯æ“´å……æ€§ï¼Œä¹‹å¾Œå¦‚æœè¦æ‹“å±•å…¶ä»–åˆ†åº—åƒæ˜¯æ—¥æœ¬åˆ†åº—ï¼Œåªéœ€æ–°å¢ä¸€å€‹ JPBeverageFactory ï¼Œå°±èƒ½å‰µå»ºèƒ½åšå‡ºç¬¦åˆæ—¥æœ¬äººå£å‘³çš„é£²æ–™å·¥å» ï¼Œè€Œä¸éœ€ä¿®æ”¹åˆ°å…¶ä»–ä¸éœ€è®Šå‹•çš„ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œä¾†çœ‹ä¸€ä¸‹ &lt;strong&gt;å·¥å» æ–¹æ³•&lt;/strong&gt; çš„ UML åœ–&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_5_factory_method_pattern_uml_2.png&quot; alt=&quot;design_pattern_5_factory_method_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘ä¾†çœ‹çœ‹å·¥å» æ–¹æ³•ç”¨åˆ°å“ªäº› &lt;a href=&quot;/blog/design%20pattern/design-pattern-1-design-principle/&quot;&gt;Design Principle&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Encapsulate What Varies&lt;/li&gt;
  &lt;li&gt;Loose Coupling&lt;/li&gt;
  &lt;li&gt;Program to Interfaces&lt;/li&gt;
  &lt;li&gt;Single Responsibility Principle&lt;/li&gt;
  &lt;li&gt;Open Closed Principle&lt;/li&gt;
  &lt;li&gt;Dependency Inversion Principle&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹ä¸€ç¯‡è¦ä»‹ç´¹æœ€å¾Œä¸€å€‹å·¥å» æ¨¡å¼ Abstract Factory Pattern æŠ½è±¡å·¥å» æ¨¡å¼&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://refactoring.guru/design-patterns/factory-method&quot;&gt;refactoring&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Factory Method Pattern" /><summary type="html">æä¾›ä¸€å€‹ä»‹é¢ç”¨ä¾†å‰µå»ºç‰©ä»¶ï¼ŒçœŸæ­£å¯¦é«”åŒ–çš„é¡åˆ¥ç”±å­é¡åˆ¥å¯¦ä½œæ±ºå®šã€‚</summary></entry><entry><title type="html">Design Pattern ç³»åˆ— (4) - Simple Factory Pattern</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-4-simple-factory-pattern/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (4) - Simple Factory Pattern" /><published>2022-02-13T15:45:00+00:00</published><updated>2022-02-13T15:45:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-4-simple-factory-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-4-simple-factory-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»Šå¤©æˆ‘å€‘æƒ³åšä¸€å¥—é£²æ–™é»é¤ç³»çµ±ï¼Œå¾ˆå¿«çš„æˆ‘å€‘ç•«å‡º UML ä¸¦å¯«å‡ºäº†ä¸‹é¢çš„ç¨‹å¼ç¢¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_4_simple_factory_pattern_uml_1.png&quot; alt=&quot;design_pattern_4_simple_factory_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;9734933a-0599-4e9f-b278-ed13373da1bf&quot; data-name=&quot;simple-factory-pattern-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;9734933a-0599-4e9f-b278-ed13373da1bf&quot; data-name=&quot;simple-factory-pattern-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/524687369cea9156cfa845b0bf002996.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/0d007a8b715cdcb55ab7c928c619c712.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;éš¨è‘—é£²æ–™åº—è¶Šä¾†è¶Šå¤šæ–°é£²å“ï¼Œæˆ‘å€‘ä¹Ÿéœ€è¦ä¿®æ”¹ order æ–¹æ³•ï¼Œä½†é€™æ¨£å®¹æ˜“å½±éŸ¿ä¸æœƒè®Šå‹•çš„ç¨‹å¼ç¢¼ï¼Œæ–¼æ˜¯æˆ‘å€‘éœ€è¦æ‰¾å‡º &lt;strong&gt;éœ€è¦è®Šå‹•&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;ä¸éœ€è®Šå‹•&lt;/strong&gt; çš„ç¨‹å¼ç¢¼ï¼ŒæŠŠå®ƒå€‘åˆ†éš”é–‹ä¾†&lt;/p&gt;

&lt;p&gt;éœ€è¦è®Šå‹•çš„ç¨‹å¼ç¢¼&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;51fe49f9-f395-4b27-8882-46abaed29134&quot; data-name=&quot;simple-factory-pattern-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;51fe49f9-f395-4b27-8882-46abaed29134&quot; data-name=&quot;simple-factory-pattern-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/4286ac98cd3b7065abbdfb977896e5af.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/b6fc75b9612175a1f0b1b02972555fd3.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä¸éœ€è®Šå‹•çš„ç¨‹å¼ç¢¼&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;329e38f0-9dd6-4a8f-b6db-c0f8bd8e6b6b&quot; data-name=&quot;simple-factory-pattern-3&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;329e38f0-9dd6-4a8f-b6db-c0f8bd8e6b6b&quot; data-name=&quot;simple-factory-pattern-3&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/d4c281f4826ebfe031f13c6b794bab94.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/118247f29320ce89ddcbab8e0f68557a.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;æ‰¾å‡ºå¾Œè©²å¦‚ä½•åšå‘¢ï¼Œé€™æ™‚å€™éœ€è¦ç”¨åˆ° &lt;strong&gt;ç°¡å–®å·¥å» æ¨¡å¼&lt;/strong&gt; ä¾†å°‡å…¶åˆ†é›¢&lt;/p&gt;

&lt;h2 id=&quot;simple-factory-pattern-ç°¡å–®å·¥å» æ¨¡å¼&quot;&gt;Simple Factory Pattern ç°¡å–®å·¥å» æ¨¡å¼&lt;/h2&gt;

&lt;p&gt;å…¶å¯¦å°±æ˜¯å®šç¾©ä¸€å€‹å·¥å» é¡åˆ¥ä¾†å°ˆé–€è™•ç†å‰µå»ºç‰©ä»¶çš„é‚è¼¯
é‚£å°±è®“æˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ UML åŠç¨‹å¼ç¢¼å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_4_simple_factory_pattern_uml_2.png&quot; alt=&quot;design_pattern_4_simple_factory_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;ec1d794e-5c4e-4869-8997-0f111ae6aa49&quot; data-name=&quot;simple-factory-pattern-4&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;ec1d794e-5c4e-4869-8997-0f111ae6aa49&quot; data-name=&quot;simple-factory-pattern-4&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/ae11dfd9eb50874a151dc04b5051bb3d.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/94ea6cf630fd9b3b92e476d5273a08cb.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;é€éç°¡å–®å·¥å» æ¨¡å¼ï¼Œæˆ‘å€‘å°±å°‡ &lt;strong&gt;éœ€è¦è®Šå‹•&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;ä¸éœ€è®Šå‹•&lt;/strong&gt; çš„ç¨‹å¼ç¢¼æˆåŠŸåˆ†éš”é–‹ä¾†ï¼Œç•¶è¦ä¿®æ”¹èœå–®æ™‚ï¼Œåªéœ€ä¿®æ”¹ &lt;strong&gt;BeverageFactory&lt;/strong&gt; å³å¯ï¼Œä¸æœƒå½±éŸ¿åˆ°å…¶ä»–ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç°¡å–®å·¥å» å…¶å¯¦ä¸æ˜¯è¨­è¨ˆæ¨¡å¼ï¼Œåè€Œæ¯”è¼ƒåƒæ˜¯ä¸€ç¨®ç·¨æˆç¿’æ…£&lt;/p&gt;

  &lt;p&gt;æœ‰äº›é–‹ç™¼è€…çš„ç¢ºæ˜¯æŠŠé€™å€‹ç·¨æˆç¿’æ…£èª¤èªç‚º &lt;strong&gt;å·¥å» æ¨¡å¼ (Factory Pattern)&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;ä¸è¦å› ç‚ºç°¡å–®å·¥å» ä¸æ˜¯ä¸€å€‹ &lt;strong&gt;çœŸæ­£çš„&lt;/strong&gt; æ¨¡å¼ï¼Œå°±å¿½ç•¥äº†å®ƒçš„ç”¨æ³•ã€‚&lt;/p&gt;

  &lt;p&gt;â€“ Head First Design Pattern Ch.4 P.117&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æœ€å¾Œä¾†çœ‹ä¸€ä¸‹ &lt;strong&gt;ç°¡å–®å·¥å» æ¨¡å¼&lt;/strong&gt; çš„ UML åœ–
&lt;img src=&quot;/blog/assets/images/design_pattern_4_simple_factory_pattern_uml_3.png&quot; alt=&quot;design_pattern_4_simple_factory_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;ç°¡å–®å·¥å» é›–ç„¶ä¸æ˜¯ 23 å€‹è¨­è¨ˆæ¨¡å¼ä¹‹ä¸­çš„ä¸€ç¨®ï¼Œä½†å®ƒéå¸¸ç°¡å–®ï¼Œä¸”èƒ½è¨“ç·´æˆ‘å€‘å°‡è®Šå‹•åŠä¸æœƒè®Šå‹•çš„ç¨‹å¼ç¢¼åˆ†é›¢çš„ç¿’æ…£
ä¾†çœ‹ä¸€ä¸‹æˆ‘å€‘åœ¨ç°¡å–®å·¥å» ç”¨åˆ°äº†å“ªäº› &lt;a href=&quot;/blog/design%20pattern/design-pattern-1-design-principle/&quot;&gt;Design Principle&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Encapsulate What Varies&lt;/li&gt;
  &lt;li&gt;Single Responsibility Principle&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹ä¸€ç¯‡æ­£å¼é€²å…¥ 23 å€‹ Design Pattern çš„ç¬¬ä¸€å€‹ Factory Method Pattern å·¥å» æ–¹æ³•æ¨¡å¼&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Simple Factory Pattern" /><summary type="html">å°‡æœƒè®Šå‹•çš„å‰µå»ºç‰©ä»¶ç¨‹å¼ç¢¼èˆ‡ä¸æœƒè®Šå‹•çš„ç¨‹å¼ç¢¼åˆ†é–‹å§ï¼Œå¢åŠ ç¨‹å¼ç¢¼å¯è®€æ€§åŠç¶­è­·æ€§</summary></entry><entry><title type="html">Design Pattern ç³»åˆ— (3) - UML è©³ç´°è§£èªª</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-3-uml/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (3) - UML è©³ç´°è§£èªª" /><published>2022-02-06T15:36:00+00:00</published><updated>2022-02-06T15:36:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-3-uml</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-3-uml/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;uml-unified-modeling-language&quot;&gt;UML (Unified Modeling Language)&lt;/h2&gt;

&lt;p&gt;UML æ˜¯ä¸€ç¨®ç”¨è¦–è¦ºåœ–å½¢åŒ–ä¾†è¦åŠƒå»ºæ§‹è»Ÿé«”çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml.png&quot; alt=&quot;design_pattern_3_uml&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸è¦æ€¥è‘—å¯«ç¨‹å¼ï¼Œå°¤å…¶æ˜¯é‡åˆ°è¼ƒè¤‡é›œçš„åŠŸèƒ½ï¼Œå…ˆæ€è€ƒå¦‚ä½•è¨­è¨ˆæ¶æ§‹ç•«å‡º UML åœ–ï¼Œç¨‹å¼æ‰æœƒå…·æœ‰å¯è®€æ€§ã€ç¶­è­·æ€§åŠæ“´å±•æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;class-é¡åˆ¥&quot;&gt;Class é¡åˆ¥&lt;/h2&gt;

&lt;p&gt;å¦‚åœ–åˆ†ç‚ºä¸‰åˆ—ä¾åºæ˜¯&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Class åç¨±&lt;/li&gt;
  &lt;li&gt;Attribute å±¬æ€§&lt;/li&gt;
  &lt;li&gt;Operations æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_class.png&quot; alt=&quot;design_pattern_3_uml_class&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;interface-ä»‹é¢&quot;&gt;Interface ä»‹é¢&lt;/h2&gt;

&lt;p&gt;Interface æœ‰å…©ç¨®è¡¨ç¤ºæ³•&lt;/p&gt;

&lt;h3 id=&quot;ä¸€èˆ¬è¡¨ç¤ºæ³•&quot;&gt;ä¸€èˆ¬è¡¨ç¤ºæ³•&lt;/h3&gt;

&lt;p&gt;ä¸€èˆ¬å‹å¼èˆ‡ Class ä¸¦ç„¡å¤ªå¤§å€åˆ¥ï¼Œåªè¦åœ¨ Class Name ä¸Šæ–¹æ¨™è¨» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;&lt;/code&gt; å³å¯&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_interface_1.png&quot; alt=&quot;design_pattern_3_uml_interface_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ£’æ£’ç³–è¡¨ç¤ºæ³•&quot;&gt;æ£’æ£’ç³–è¡¨ç¤ºæ³•&lt;/h3&gt;

&lt;p&gt;ç”¨çƒç‹€ä¾†è¡¨ç¤ºä»‹é¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_interface_2.png&quot; alt=&quot;design_pattern_3_uml_interface_2&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;attribute-å±¬æ€§&quot;&gt;Attribute å±¬æ€§&lt;/h2&gt;

&lt;h3 id=&quot;visibility-å¯è¦–ç¯„åœ&quot;&gt;Visibility å¯è¦–ç¯„åœ&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Sign&lt;/th&gt;
      &lt;th&gt;Modifiers&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Public&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Protected&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Package&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Private&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_attribute.png&quot; alt=&quot;design_pattern_3_uml_interface_2&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;multiplicity-é—œè¯å¤šé‡æ€§&quot;&gt;Multiplicity é—œè¯å¤šé‡æ€§&lt;/h2&gt;

&lt;p&gt;Object ä¹‹é–“çš„æ•¸é‡é—œä¿‚ï¼Œé è¨­ç‚º 1&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Sign&lt;/th&gt;
      &lt;th&gt;amount&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;1 å€‹&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç„¡é™å¤šå€‹&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n...m&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è‡³å°‘ n å€‹ï¼Œè‡³å¤š m å€‹&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;dependency-ä¾è³´&quot;&gt;Dependency ä¾è³´&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸åŒå°è±¡ä¹‹é–“ç›¸äº’ä¾è³´é—œä¿‚&lt;/li&gt;
  &lt;li&gt;é€šå¸¸ç”¨æ–¼æ–¹æ³•çš„åƒæ•¸æˆ–å›å‚³å€¼&lt;/li&gt;
  &lt;li&gt;A uses a B&lt;/li&gt;
  &lt;li&gt;ç®­é ­æŒ‡å‘è¦ä¾è³´çš„å°è±¡&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è™›ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç®­é ­&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_dependency_sign.png&quot; alt=&quot;design_pattern_3_uml_dependency_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‹•ç‰©ä½¿ç”¨(ä¾è³´)æ°§æ°£å‘¼å¸ç”Ÿå­˜&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_dependency.png&quot; alt=&quot;design_pattern_3_uml_dependency&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;association-é—œè¯&quot;&gt;Association é—œè¯&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸€å€‹å°è±¡æ“æœ‰å¦ä¸€å€‹å°è±¡&lt;/li&gt;
  &lt;li&gt;é€šå¸¸ç”¨æ–¼å±¬æ€§ã€å…¨åŸŸè®Šæ•¸&lt;/li&gt;
  &lt;li&gt;A has a C&lt;/li&gt;
  &lt;li&gt;Aggregationã€Composition ç‚ºå­é›†&lt;/li&gt;
  &lt;li&gt;ç®­é ­æŒ‡å‘è¦é—œè¯çš„å°è±¡&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯¦ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç®­é ­&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_association_sign.png&quot; alt=&quot;design_pattern_3_uml_association_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯å€‹äººæœ‰(é—œè¯)ä¸€å€‹åœ°å€&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_association.png&quot; alt=&quot;design_pattern_3_uml_association&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;aggregation-èšåˆ&quot;&gt;Aggregation èšåˆ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸€å€‹å°è±¡æ“æœ‰å¦ä¸€å€‹å°è±¡&lt;/li&gt;
  &lt;li&gt;A owns a B&lt;/li&gt;
  &lt;li&gt;Association ç‚ºè¶…é›†ã€Composition ç‚ºå­é›†&lt;/li&gt;
  &lt;li&gt;è±å½¢æŒ‡å‘è¦èšåˆçš„å°è±¡&lt;/li&gt;
  &lt;li&gt;å¼±é—œè¯ï¼Œé—œè¯åŠè¢«é—œè¯å°è±¡å¯äº’ç›¸ç¨ç«‹å­˜åœ¨&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯¦ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç©ºå¿ƒè±å½¢&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_aggregation_sign.png&quot; alt=&quot;design_pattern_3_uml_aggregation_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;äººæ“æœ‰(èšåˆ)è¡£æœï¼Œäººå’Œè¡£æœå¯ä»¥å–®ç¨å­˜åœ¨&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_aggregation.png&quot; alt=&quot;design_pattern_3_uml_aggregation&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;composition-çµ„åˆ&quot;&gt;Composition çµ„åˆ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸€å€‹å°è±¡æ“æœ‰å¦ä¸€å€‹å°è±¡&lt;/li&gt;
  &lt;li&gt;C is a part of A&lt;/li&gt;
  &lt;li&gt;Associationã€Aggregation ç‚ºè¶…é›†&lt;/li&gt;
  &lt;li&gt;è±å½¢æŒ‡å‘è¦çµ„åˆçš„å°è±¡&lt;/li&gt;
  &lt;li&gt;å¼·é—œè¯ï¼Œè¢«é—œè¯å°è±¡ä¸å¯ç¨ç«‹å­˜åœ¨&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯¦ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯¦å¿ƒè±å½¢&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_composition_sign.png&quot; alt=&quot;design_pattern_3_uml_composition_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;äººé¡æœ‰å™¨å®˜ï¼Œäººæ­»äº†å™¨å®˜å°±ç„¡ä½œç”¨ä¸å­˜åœ¨äº†&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(é€™é‚Šå…ˆä¸è¨è«–å™¨å®˜å¯ç§»æ¤åˆ°åˆ¥äººèº«ä¸Šçš„æƒ…æ³ ğŸ˜‚ )&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_composition.png&quot; alt=&quot;design_pattern_3_uml_composition&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;associationaggregation-åŠ-composition-ä¸‰è€…é—œä¿‚&quot;&gt;Associationã€Aggregation åŠ Composition ä¸‰è€…é—œä¿‚&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Aggregation and Composition are subsets of association meaning they are specific cases of association. In both aggregation and composition object of one class â€œownsâ€ object of another class. But there is a subtle difference:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;Aggregation implies a relationship where the child can exist independently of the parent. Example: Class (parent) and Student (child). Delete the Class and the Students still exist.&lt;/li&gt;
    &lt;li&gt;Composition implies a relationship where the child cannot exist independent of the parent. Example: House (parent) and Room (child). Rooms donâ€™t exist separate to a House.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_compare_association_aggregation_composition.png&quot; alt=&quot;design_pattern_3_uml_compare_association_aggregation_composition&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;realization--implementation-å¯¦ç¾--å¯¦ä½œ&quot;&gt;Realization / Implementation å¯¦ç¾ / å¯¦ä½œ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸€å€‹å°è±¡å¯¦ä½œå¦ä¸€å€‹å°è±¡&lt;/li&gt;
  &lt;li&gt;B implements A&lt;/li&gt;
  &lt;li&gt;ç®­é ­æŒ‡å‘ interface&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è™›ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç©ºå¿ƒç®­é ­&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_realization_implementation_sign.png&quot; alt=&quot;design_pattern_3_uml_realization_implementation_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¿ƒã€è‚ã€èƒƒã€è…¸è¦å¯¦ä½œå™¨å®˜&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_realization_implementation.png&quot; alt=&quot;design_pattern_3_uml_realization_implementation&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;generalization--inheritance-æ³›åŒ–--ç¹¼æ‰¿&quot;&gt;Generalization / Inheritance æ³›åŒ– / ç¹¼æ‰¿&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¡¨ç¤ºä¸€å€‹å°è±¡ç¹¼æ‰¿å¦ä¸€å€‹å°è±¡&lt;/li&gt;
  &lt;li&gt;C is-a A&lt;/li&gt;
  &lt;li&gt;ç®­é ­æŒ‡å‘ çˆ¶é¡åˆ¥&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯¦ç·š&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç©ºå¿ƒç®­é ­&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_generalization_inheritance_sign.png&quot; alt=&quot;design_pattern_3_uml_generalization_inheritance_sign&quot; /&gt;&lt;/p&gt;

&lt;p&gt;äººæ˜¯ä¸€ç¨®å‹•ç‰©&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_3_uml_generalization_inheritance.png&quot; alt=&quot;design_pattern_3_uml_generalization_inheritance&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;ä¹‹å¾Œçš„ Design Pattern ç³»åˆ—æ–‡ç« æœƒå¤§é‡ä½¿ç”¨åˆ° UML åœ–ï¼Œææ‡‚é€™äº›åœ–åŠç®­é ­çš„å«ç¾©åœ¨è»Ÿé«”è¨­è¨ˆä¸Šæ˜¯éå¸¸æœ‰å¹«åŠ©çš„ï¼Œä¸‹ä¸€ç¯‡çµ‚æ–¼è¦é€²å…¥ç¬¬ä¸€å€‹ Design Patternã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©æ˜¯ 2022 æ–°å¹´é€£å‡çš„æœ€å¾Œä¸€å¤©ï¼Œæ–°å¹´éƒ½åœ¨è€å»¢è¿½å…­äººè¡Œã€Doctor X è·Ÿ JOJO çŸ³ä¹‹æµ·ï¼Œçœ‹ &lt;a href=&quot;https://tw.kotlin.tips/&quot;&gt;Kotlin è®€æ›¸æœƒ&lt;/a&gt; çš„å‰è¼© &lt;a href=&quot;https://gitpage.reccachao.net/&quot;&gt;Recca Chao&lt;/a&gt; éå¹´å¤©å¤©åœ¨åˆ· leetcode å†çœ‹çœ‹è‡ªå·±è¦ºå¾—å¾ˆæ…šæ„§ï¼Œè©²æ”¶æ”¶å¿ƒç¹¼çºŒåŠªåŠ›æœå¤¢æƒ³å‰é€²äº†!&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://spicyboyd.blogspot.com/2018/07/umlclass-diagram-introduction.html&quot;&gt;ã€UMLã€‘Class Diagram é¡åˆ¥åœ– (ä¸Š)ï¼šIntroduction ç°¡ä»‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://spicyboyd.blogspot.com/2018/07/umlclass-diagram-relationships.html&quot;&gt;ã€UMLã€‘Class Diagram é¡åˆ¥åœ– (ä¸‹)ï¼šRelationships é—œä¿‚&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.guru99.com/uml-relationships-with-example.html#5&quot;&gt;UML Relationships Types: Association, Dependency, Generalization&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/885937/what-is-the-difference-between-association-aggregation-and-composition&quot;&gt;What is the difference between association, aggregation and composition?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.visual-paradigm.com/guide/uml-unified-modeling-language/uml-aggregation-vs-composition/&quot;&gt;UML Association vs Aggregation vs Composition&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="UML" /><summary type="html">åˆ¥æ€¥è‘—å¯«ç¨‹å¼ï¼Œå…ˆè¦åŠƒå¥½æ¶æ§‹ ğŸ¤”</summary></entry><entry><title type="html">Design Pattern ç³»åˆ— (2) - Design Patterns Categories</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-2-design-patterns-categories/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (2) - Design Patterns Categories" /><published>2022-01-31T16:00:00+00:00</published><updated>2022-01-31T16:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-2-design-patterns-categories</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-2-design-patterns-categories/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;design-patterns-categories&quot;&gt;Design Patterns Categories&lt;/h2&gt;

&lt;p&gt;Design Pattern å¯ä»¥åˆ†ç‚ºä¸‰ç¨®åŸºæœ¬çš„é¡å‹&lt;/p&gt;

&lt;h3 id=&quot;creational-å‰µå»ºå‹&quot;&gt;Creational å‰µå»ºå‹&lt;/h3&gt;

&lt;p&gt;å‰µå»ºå¯¦ä¾‹åŒ–ç‰©ä»¶æœ‰é—œçš„ Patterns&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Factory Method Pattern&lt;/li&gt;
  &lt;li&gt;Abstract Factory Pattern&lt;/li&gt;
  &lt;li&gt;Builder Pattern&lt;/li&gt;
  &lt;li&gt;Prototype Pattern&lt;/li&gt;
  &lt;li&gt;Singleton Pattern&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;structural-çµæ§‹å‹&quot;&gt;Structural çµæ§‹å‹&lt;/h3&gt;

&lt;p&gt;ç‰©ä»¶ä¹‹é–“å¦‚ä½•çµ„æˆæ›´å¤§çµæ§‹çš„ Patterns&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Adapter Pattern&lt;/li&gt;
  &lt;li&gt;Bridge Pattern&lt;/li&gt;
  &lt;li&gt;Decorator Pattern&lt;/li&gt;
  &lt;li&gt;Facade Pattern&lt;/li&gt;
  &lt;li&gt;Proxy Pattern&lt;/li&gt;
  &lt;li&gt;Flyweight Pattern&lt;/li&gt;
  &lt;li&gt;Composite Pattern&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;behavioural-è¡Œç‚ºå‹&quot;&gt;Behavioural è¡Œç‚ºå‹&lt;/h3&gt;

&lt;p&gt;ç‰©ä»¶ä¹‹é–“è¡Œç‚ºäº¤äº’çš„ Patterns&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Chain of Responsibility Pattern&lt;/li&gt;
  &lt;li&gt;Mediator Pattern&lt;/li&gt;
  &lt;li&gt;Iterator Pattern&lt;/li&gt;
  &lt;li&gt;State Pattern&lt;/li&gt;
  &lt;li&gt;Observer Pattern&lt;/li&gt;
  &lt;li&gt;Command Pattern&lt;/li&gt;
  &lt;li&gt;Strategy Pattern&lt;/li&gt;
  &lt;li&gt;Template Pattern&lt;/li&gt;
  &lt;li&gt;Interpreter Pattern&lt;/li&gt;
  &lt;li&gt;Memento Pattern&lt;/li&gt;
  &lt;li&gt;Visitor Pattern&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æœƒä¸€ä¸€ä»‹ç´¹é€™ GoF é€™ 23 ç¨® Design Patternã€‚&lt;/p&gt;

&lt;p&gt;2022 å¹´é™¤å¤•å®ˆæ­²çµæŸäº†ï¼Œä¹Ÿè©²å»ç¡äº†ï¼Œæº–å‚™æ˜å¤©ç¹¼çºŒåŠªåŠ›å®Œæˆ Design Pattern ç³»åˆ—ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Creational Patterns" /><category term="Structural Patterns" /><category term="Behavioral Patterns" /><summary type="html">Creational x Structural x Behavioural</summary></entry><entry><title type="html">Design Pattern ç³»åˆ— (1) - Design Principle</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-1-design-principle/" rel="alternate" type="text/html" title="Design Pattern ç³»åˆ— (1) - Design Principle" /><published>2022-01-31T09:30:00+00:00</published><updated>2022-01-31T09:30:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-1-design-principle</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-1-design-principle/">&lt;p&gt;é€™ä¸€ç³»åˆ—æ–‡ç« æˆ‘æœƒé€éå·¥ä½œä¸Šçš„ç¶“é©—åŠç ”è®€ &lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;ã€&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt; å…©æœ¬æ›¸ï¼ŒåŠ ä¸Šå­¸ç¿’ Linkedin Learning ä¸Šçš„å…©å€‹èª²ç¨‹ &lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;ã€&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;ã€&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;ï¼Œç†è§£æ•´ç†å¾Œï¼Œå¯«æˆæ–‡ç« åˆ†äº«!&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;design-pattern&quot;&gt;Design Pattern&lt;/h2&gt;

&lt;p&gt;åœ¨è»Ÿé«”è¨­è¨ˆæœƒé‡åˆ°å„ç¨®å•é¡Œï¼ŒDesign Pattern æ˜¯è»Ÿé«”è¨­è¨ˆé«˜æ‰‹ç‚ºé€™äº›å¸¸è¦‹çš„å•é¡Œæ‰€æå‡ºçš„è§£æ±ºæ–¹æ¡ˆï¼Œè§£æ±ºè¨­è¨ˆä¸Šå½ˆæ€§ã€æ“´å……ä¸è¶³ç­‰ç­‰å•é¡Œâ€¦&lt;/p&gt;

&lt;h2 id=&quot;design-pattern-çš„é‡è¦æ€§&quot;&gt;Design Pattern çš„é‡è¦æ€§&lt;/h2&gt;

&lt;p&gt;è¨­è¨ˆæ¨¡å¼åœ¨è»Ÿé«”å·¥ç¨‹ä¸Šæ˜¯éå¸¸é‡è¦çš„æ ¸å¿ƒçŸ¥è­˜ï¼Œè¨­è¨ˆæ¨¡å¼ä¹‹æ–¼è»Ÿé«”å·¥ç¨‹å¸«ï¼Œå°±åƒå…§åŠŸå¿ƒæ³•ä¹‹æ–¼ç¿’æ­¦ä¹‹äººä¸€æ¨£é‡è¦ï¼Œç¥éµ°ä¿ ä¾¶ä¸­çš„æ¥Šéç²¾é€šå„å¼å„æ¨£çš„æ­¦åŠŸï¼Œä¹Ÿæ˜¯å› ç‚ºå…§åŠŸæ·±åšï¼Œå¾ŒæœŸä¸è«–å­¸ä»»ä½•æ­¦åŠŸéƒ½éå¸¸å¿«é€Ÿï¼Œè€Œè»Ÿé«”å·¥ç¨‹å¸«çš„æ ¸å¿ƒæŠ€èƒ½å°±æ˜¯æ¼”ç®—æ³•ã€è³‡æ–™çµæ§‹ã€è¨­è¨ˆæ¨¡å¼ã€æ¶æ§‹ç­‰â€¦ï¼Œåªè¦å°‡é€™äº›å…±é€šæŠ€èƒ½å­¸å¥½ï¼Œåœ¨ä¸åŒçš„ç¨‹å¼èªè¨€åŠé ˜åŸŸéƒ½èƒ½éå¸¸å¿«ä¸Šæ‰‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_mind.png&quot; alt=&quot;design_pattern_design_principle_mind&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;design-principle&quot;&gt;Design Principle&lt;/h2&gt;

&lt;p&gt;Design Principle æ˜¯ç”¨ä¾†å¹«åŠ©æˆ‘å€‘æ”¹å–„ç‰©ä»¶å°å‘è¨­è¨ˆçš„å»ºè­°ï¼Œå¹«åŠ©æˆ‘å€‘è¨­è¨ˆå‡ºæ›´å¥½çš„è»Ÿé«”ã€‚&lt;/p&gt;

&lt;h2 id=&quot;object-oriented-concepts-ç‰©ä»¶å°å‘æ¦‚å¿µ&quot;&gt;Object-Oriented Concepts ç‰©ä»¶å°å‘æ¦‚å¿µ&lt;/h2&gt;

&lt;p&gt;å­¸ç‰©ä»¶å°å‘è¨­è¨ˆä¸€å®šéƒ½æœƒçŸ¥é“é€™å››å¤§æ¦‚å¿µï¼Œé€™é‚Šæˆ‘å°±ç°¡å–®æè¿°å¸¶é&lt;/p&gt;

&lt;h3 id=&quot;encapsulation-å°è£&quot;&gt;Encapsulation å°è£&lt;/h3&gt;

&lt;p&gt;å°‡å±¬æ€§åŠæ–¹æ³•å¯¦ä½œç´°ç¯€éš±è—èµ·ä¾†åœ¨é¡åˆ¥ç•¶ä¸­ï¼Œåªæš´éœ²éƒ¨åˆ†æ–¹æ³•çµ¦ä½¿ç”¨è€…ï¼Œä½¿ç”¨è€…ç„¡æ³•ä»»æ„ä¿®æ”¹å…§éƒ¨å±¬æ€§åŠæ–¹æ³•å¯¦ä½œç´°ç¯€ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åƒæ˜¯é–‹è»Šä¸€æ¨£ï¼Œæˆ‘å€‘åªéœ€çŸ¥é“è¸©æ²¹é–€æœƒåŠ é€Ÿï¼Œè¸©ç…è»Šæœƒåœæ­¢ï¼Œä¸éœ€è¦çŸ¥é“é¦¬é”ã€é›»ç“¶ã€ç™¼å‹•æ©Ÿç­‰ç­‰åŸç†ï¼Œé€™äº›éƒ½è¢«å°ˆæ¥­æ±½è»Šå·¥ç¨‹å¸«å°è£åœ¨å¼•æ“è“‹ä¸­äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;inheritance-ç¹¼æ‰¿&quot;&gt;Inheritance ç¹¼æ‰¿&lt;/h3&gt;

&lt;p&gt;å­é¡åˆ¥å¯ä»¥ç¹¼æ‰¿çˆ¶é¡åˆ¥çš„å±¬æ€§åŠæ–¹æ³•ï¼Œé”åˆ°ç¨‹å¼ç¢¼é‡è¤‡ä½¿ç”¨ä¹‹ç›®çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è‡ªç„¶ç•Œä¸­ï¼Œç‹—èˆ‡è²“éƒ½æ˜¯å‹•ç‰©èƒ½å‘¼å¸è¡Œå‹•ï¼ŒèŠ±è‰åŠæ¨¹æœ¨éƒ½æ˜¯æ¤ç‰©èƒ½è¡Œå…‰åˆä½œç”¨ï¼Œé€™å°±æ˜¯ç¹¼æ‰¿ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;polymorphism-å¤šå‹&quot;&gt;Polymorphism å¤šå‹&lt;/h3&gt;

&lt;p&gt;ç‚ºä¸åŒçš„é¡åˆ¥æä¾›çµ±ä¸€ä»‹é¢æˆ–æŠ½è±¡é¡åˆ¥ï¼Œä»¥æ“ä½œä¸åŒçš„å¯¦é«”ç‰©ä»¶ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä»¥å‰ iPhone 6S å¹´ä»£é‚„ä¸åƒç¾åœ¨å…¨æ˜¯å°ç©é›»ä»£å·¥ï¼Œæœ‰ä¸€éƒ¨åˆ† i6S æ˜¯çµ¦ä¸‰æ˜Ÿä»£å·¥ï¼Œä½†ç„¡è«–æ˜¯å°ç©é›»æˆ–ä¸‰æ˜Ÿä»£å·¥çš„æ™¶åœ“ï¼Œéƒ½èƒ½è¢« i6S ä½¿ç”¨ï¼Œä½¿ç”¨è€…æ‹¿åˆ°çš„ i6S ç„¡è«–æ˜¯å°ç©é›»æˆ–ä¸‰æ˜Ÿä»£å·¥ï¼Œæ‰‹æ©Ÿçš„åŠŸèƒ½éƒ½ä¸€æ¨£éƒ½æ˜¯ i6Sï¼Œé€™å°±æ˜¯å¤šå‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;abstraction-æŠ½è±¡&quot;&gt;Abstraction æŠ½è±¡&lt;/h3&gt;

&lt;p&gt;é€éé¡å‹å­é¡åŠæŠ½è±¡æ–¹å¼ï¼Œéš±è—ä¾è³´æ–¼é¡å‹æˆ–æ¥å£çš„å¯¦ä½œç´°ç¯€ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æˆ‘å€‘æœƒåœ¨æ‰‹æ©Ÿä¸Šè£å¾ˆå¤š Appï¼ŒApp å°±æ˜¯å°å„ç¨®ä¸åŒ Application çš„ä¸€å€‹æŠ½è±¡åç¨±ï¼Œæˆ‘å€‘æœƒèªªå»å¸‚å ´è²·æ°´æœï¼Œå¯èƒ½æ˜¯è˜‹æœä¹Ÿå¯èƒ½æ˜¯é¦™è•‰ï¼Œæ°´æœä¹Ÿæ˜¯ä¸€ç¨®æŠ½è±¡åç¨±ï¼Œå…¶ä»–åƒæ˜¯è‚‰ã€è”¬èœç­‰ç­‰ä¹Ÿæ˜¯ï¼Œé€™å°±æ˜¯æŠ½è±¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;object-oriented-concepts-design-principle-design-pattern-ä¹‹é–“é—œä¿‚&quot;&gt;Object-Oriented Concepts, Design Principle, Design Pattern ä¹‹é–“é—œä¿‚&lt;/h2&gt;

&lt;p&gt;ä¸‰è€…é—œä¿‚æ˜¯ç”±ä¸‹è‡³ä¸Šçš„æ¦‚å¿µï¼ŒDesign Principle ç”± Object-Oriented Concepts æ¦‚å¿µæ‰€è¡ç”Ÿï¼ŒDesign Pattern ç”± Design Principle æ¦‚å¿µæ‰€è¡ç”Ÿ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_architecture.png&quot; alt=&quot;design_pattern_design_principle_architecture&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æœ‰é»åƒé¬¼æ»…ä¹‹åˆƒä¸­å‘¼å¸æ³•éƒ½æºè‡ªæ–¼æ—¥ä¹‹å‘¼å¸çš„æ¦‚å¿µ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i2.wp.com/bokunoheroaccount.com/wp-content/uploads/2020/08/cbf2d5e3fb4f256a702921bbb064c05a-1024x821.png?resize=1024%2C821&amp;amp;ssl=1&quot; alt=&quot;breathe way&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;refer to &lt;a href=&quot;https://i2.wp.com/bokunoheroaccount.com/wp-content/uploads/2020/08/cbf2d5e3fb4f256a702921bbb064c05a-1024x821.png?resize=1024%2C821&amp;amp;ssl=1&quot;&gt;https://i2.wp.com/bokunoheroaccount.com/wp-content/uploads/2020/08/cbf2d5e3fb4f256a702921bbb064c05a-1024x821.png?resize=1024%2C821&amp;amp;ssl=1&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;encapsulate-what-varies-å°è£è®ŠåŒ–&quot;&gt;Encapsulate What Varies å°è£è®ŠåŒ–&lt;/h2&gt;

&lt;p&gt;æ‰¾å‡ºç¨‹å¼ä¸­å¯èƒ½éœ€è¦æ›´å‹•ä¹‹è™•ï¼ŒæŠŠå®ƒå€‘ç¨ç«‹å‡ºä¾†ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦æ›´å‹•çš„ç¨‹å¼ç¢¼æ··å†ä¸€èµ·ã€‚&lt;/p&gt;

&lt;p&gt;å‡è¨­ä»Šå¤©è¦è¨­è¨ˆä¸€é–“é¬†é¤…åº—ï¼Œå¯ä»¥è¨‚è³¼é¬†é¤…&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;91975986-3935-4449-9493-62af668b1261&quot; data-name=&quot;encapsulate-what-varies-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;91975986-3935-4449-9493-62af668b1261&quot; data-name=&quot;encapsulate-what-varies-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/835acb7a2496ff7b39cda8a47e665c08.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/0f4b98c8be72d377a2b38aa81f5a8dbf.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä½†è€é—†ä»Šå¤©æƒ³å¢åŠ æ–°å£å‘³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ChocolateChip&lt;/code&gt;ï¼Œä½† cook(), plate(), addButter() é€™äº›ç¨‹å¼ä¸¦ä¸éœ€è¦ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘å€‘æ‡‰è©²å°‡æœƒè®ŠåŒ–çš„ç¨‹å¼ç¢¼æŠ½å‡ºä¾†å°è£ï¼Œæ¸›å°‘å°ä¸éœ€è®Šå‹•çš„ç¨‹å¼ç¢¼ç”¢ç”Ÿå½±éŸ¿ã€‚&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;75c9a553-3c3b-4b26-8a34-dee1ba11ea63&quot; data-name=&quot;encapsulate-what-varies-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;75c9a553-3c3b-4b26-8a34-dee1ba11ea63&quot; data-name=&quot;encapsulate-what-varies-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/07f751fc0716f9194e1aca18b2bc88e4.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/22a42676343d12b474b15c5ffe7cb063.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å¦‚æ­¤æˆ‘å€‘å°±å¯ä»¥éš¨æ™‚æ·»åŠ æ–°å£å‘³ä¸”ä¸æœƒå½±éŸ¿å…¶ä»–ä¸æœƒè®Šå‹•çš„ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;favor-composition-over-inheritance-å¤šç”¨åˆæˆå°‘ç”¨ç¹¼æ‰¿&quot;&gt;Favor composition over inheritance å¤šç”¨åˆæˆï¼Œå°‘ç”¨ç¹¼æ‰¿&lt;/h2&gt;

&lt;p&gt;HAS-A (composition) can be better than IS-A (inheritance)&lt;/p&gt;

&lt;p&gt;ç›¡é‡ä½¿ç”¨åˆæˆä¾†å–ä»£ç¹¼æ‰¿ï¼Œä¸¦ä¸æ˜¯å®Œå…¨ä¸ä½¿ç”¨ç¹¼æ‰¿ï¼Œè€Œæ˜¯å¤šæ•¸æƒ…æ³ä¸‹ä½ æ‡‰è©²è€ƒæ…®ä½¿ç”¨åˆæˆè€Œä¸æ˜¯ç¹¼æ‰¿&lt;/p&gt;

&lt;p&gt;å‡è¨­ä»Šå¤©è¦è¨­è¨ˆä¸€é–“å’–å•¡åº—ï¼Œè£¡é¢æœ‰è³£å¾ˆå¤šå’–å•¡ï¼Œæˆ‘å€‘å¯ä»¥é€™æ¨£è¨­è¨ˆ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_favor_composition_over_inheritance_1.png&quot; alt=&quot;design_pattern_design_principle_favor_composition_over_inheritance_1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†å¦‚æœä»Šå¤©å®¢äººè¦åŠ  Butter åŠ Milkï¼Œæˆ‘å€‘åˆè¦å®šç¾©ä¸€å€‹æ–°çš„ class CoffeeWithButterAndMilk ç¹¼æ‰¿ Coffee
æˆ‘å€‘æœƒç™¼ç¾ï¼Œéš¨è‘—èª¿å‘³æ–™ç¨®é¡è¶Šå¤šï¼Œå’–å•¡çš„çµ„åˆä¹Ÿæœƒè¶Šä¾†è¶Šå¤šï¼Œä»¥åŠç‰›å¥¶åƒ¹æ ¼ä¸Šæ¼²ï¼Œé‚£æ‰€æœ‰åŒ…å«ç‰›å¥¶çš„ Coffee éƒ½å¿…é ˆä¿®æ”¹&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘å€‘ç”¨åˆæˆå–ä»£ç¹¼æ‰¿å‘¢ï¼Œå¾ç‰›å¥¶å’–å•¡æ˜¯(is-A)å’–å•¡ï¼Œè®Šæˆå’–å•¡æœ‰(has-A)å„ç¨®èª¿å‘³æ–™&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_favor_composition_over_inheritance_2.png&quot; alt=&quot;design_pattern_design_principle_favor_composition_over_inheritance_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½ æœƒç™¼ç¾ä½¿ç”¨åˆæˆå–ä»£ç¹¼æ‰¿æœ‰ä¸‹åˆ—å¥½è™•&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¯ä»¥åœ¨ Run time æ›¿æ›ä¸åŒçš„èª¿æ–™ç‰©ä»¶&lt;/li&gt;
  &lt;li&gt;æ–°å¢ä¸€ç¨®æ–°èª¿æ–™åªéœ€æ–°å¢ä¸€å€‹å°æ‡‰çš„ class&lt;/li&gt;
  &lt;li&gt;æ²’æœ‰é‡è¤‡çš„ç¨‹å¼ç¢¼&lt;/li&gt;
  &lt;li&gt;é¿å… class æ•¸é‡çˆ†ç‚¸æ€§å¢åŠ &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;å†æ¬¡å¼·èª¿ä¸æ˜¯å®Œå…¨ä¸ç”¨ç¹¼æ‰¿ï¼Œè€Œæ˜¯â€ç›¡é‡â€ç”¨åˆæˆå–ä»£ç¹¼æ‰¿ï¼Œåƒåœ–ä¸­ä¾‹å­ Mochaã€Butter åŠ Milk ä¹Ÿæ˜¯æœ‰ä½¿ç”¨åˆ°ç¹¼æ‰¿å»ç¹¼æ‰¿ Condiment&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;loose-coupling-é¬†è€¦åˆ&quot;&gt;Loose Coupling é¬†è€¦åˆ&lt;/h2&gt;

&lt;p&gt;å°‡æ¯å€‹çµ„ä»¶ç¨ç«‹é–‹ä¾†ï¼Œä½¿éƒ¨ä»¶ä¹‹é–“çš„ç›¸äº’å½±éŸ¿é™ä½&lt;/p&gt;

&lt;p&gt;å†ä¾†çœ‹ä¸€å€‹ç¯„ä¾‹ï¼Œä»Šå¤©è¦åšä¸€å€‹ Weather Appï¼Œä»–å¯ä»¥å–å¾—æº«åº¦ä¸¦é¡¯ç¤ºåœ¨è¢å¹•ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_loose_coupling_1.png&quot; alt=&quot;design_pattern_design_principle_loose_coupling_1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½ æœƒç™¼ç¾ WeatherApp èˆ‡ LCDScreen ç·Šå¯†è€¦åˆï¼Œä»Šå¤©å¦‚æœè€é—†æƒ³æ”¹æˆåœ¨ Widget æˆ– LED ä¸Šä¾†é¡¯ç¤ºï¼ŒWeatherApp çš„ screen å±¬æ€§åŠ display æ–¹æ³•éƒ½è¦ä¿®æ”¹ï¼Œä¸”ä¸èƒ½åœ¨ Run time ä»»æ„æ›¿æ›ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘æ”¹ä¸€ä¸‹ UML ä¾†å°‡å…©è€…ä¹‹é–“åšè§£è€¦&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_loose_coupling_2.png&quot; alt=&quot;design_pattern_design_principle_loose_coupling_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é€™æ¨£ä¸ç®¡è€é—†æƒ³æ”¹æˆä»€éº¼è¢å¹•éƒ½èƒ½å¤ å¾ˆè¼•æ˜“æ›¿æ›ï¼Œå› ç‚º WeatherApp ä¾è³´çš„æ˜¯ä»‹é¢ï¼Œä¸å†æ˜¯å¯¦é«”ï¼Œå–„ç”¨æŠ½è±¡ä»‹é¢è§£è€¦å…©å€‹å¯¦é«”ç‰©ä»¶å§!&lt;/p&gt;

&lt;h2 id=&quot;program-to-interfaces-åŸºæ–¼ä»‹é¢ç·¨ç¨‹&quot;&gt;Program to Interfaces åŸºæ–¼ä»‹é¢ç·¨ç¨‹&lt;/h2&gt;

&lt;p&gt;å¯«ç¨‹å¼æ˜¯é‡å°ä»‹é¢è€Œå¯«ï¼Œè€Œä¸æ˜¯é‡å°å¯¦è¸æ–¹å¼è€Œå¯«ã€‚&lt;/p&gt;

&lt;p&gt;ç•¶ä½ é‡å°ä»‹é¢ç·¨å¯«ï¼Œä½ æœƒç™¼ç¾ä»»ä½•ç‰©ä»¶éƒ½è®Šå¾—éå¸¸å¥½æŠ½æ›ï¼Œç•¶ä½ éœ€è¦æ³¨å…¥å‡è³‡æ–™æ¸¬è©¦ï¼Œä½ å¯ä»¥ä½œå‡ç‰©ä»¶å¯¦ä½œæ­¤ä»‹é¢å³å¯ï¼Œç•¶ä½ åœ¨åš MVC MVP ç­‰æ¶æ§‹ï¼Œåªéœ€è¦å¯¦ä½œæ­¤ä»‹é¢å°±èƒ½è¼•æ˜“æ›¿æ›çµ„ä»¶ï¼Œç•¶ä½ é–‹å§‹å·²ä»‹é¢å»æ€è€ƒï¼Œä½ æœƒç™¼ç¾ç¨‹å¼ç¢¼è®Šå¾—éå¸¸æœ‰å½ˆæ€§ã€ä¸”å¥½æ“´å……æ¸¬è©¦ï¼ŒApple ç”šè‡³åœ¨ WWDC15 ä¸­æåˆ° Swift çš„ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2015/408/&quot;&gt;Protocol-Oriented Programming&lt;/a&gt;ï¼Œä»£è¡¨ä»‹é¢(å”è­°)æ€è€ƒçš„é‡è¦æ€§ï¼Œæ‰€ä»¥å¾ç¾åœ¨èµ·é–‹å§‹å¾ä»‹é¢æ€è€ƒå§!&lt;/p&gt;

&lt;p&gt;ä¾†å€‹ä¾‹å­ï¼Œä»Šå¤©æˆ‘å€‘è¦è¨­è¨ˆä¸€å€‹åŸºæœ¬ç¶²ç«™ï¼Œæœ‰ä¸€å€‹ WebSystem åŠ DB ä¾†å­˜è®€è³‡æ–™&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_program_to_interface_1.png&quot; alt=&quot;design_pattern_design_principle_program_to_interface_1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»Šå¤©æˆ‘å€‘æƒ³åœ¨ä¸Š Production å‰ï¼Œå°‡ CommercialDB æ›æˆ TestDB
åšæ¸¬è©¦ï¼Œä½†ç›®å‰ KillerWebSystem çš„ db å‹åˆ¥ç‚º CommercialDB ç„¡æ³•æŠ½æ›&lt;/p&gt;

&lt;p&gt;è®“æˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_design_principle_program_to_interface_2.png&quot; alt=&quot;design_pattern_design_principle_program_to_interface_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯«ä¸€å€‹ AbstractDB çš„ä»‹é¢æˆ–æŠ½è±¡é¡åˆ¥ï¼Œè®“ CommercialDB åŠ TestDB éƒ½å¯¦ä½œæ­¤ä»‹é¢ï¼Œé€™æ¨£å°±èƒ½å¾ˆè¼•é¬†çš„åœ¨æ¸¬è©¦ç’°å¢ƒæ›¿æ› DB&lt;/p&gt;

&lt;h2 id=&quot;solid-ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆåŸºæœ¬äº”å¤§åŸå‰‡&quot;&gt;SOLID ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆåŸºæœ¬äº”å¤§åŸå‰‡&lt;/h2&gt;

&lt;h3 id=&quot;single-responsibility-principle-srp-å–®ä¸€è·è²¬åŸå‰‡&quot;&gt;Single Responsibility Principle (SRP) å–®ä¸€è·è²¬åŸå‰‡&lt;/h3&gt;

&lt;p&gt;ç‰©ä»¶æ‡‰è©²åƒ…å…·æœ‰ä¸€ç¨®å–®ä¸€åŠŸèƒ½ï¼Œæ‡‰åªæœƒæœ‰ä¸€å€‹ç†ç”±å»æ”¹è®Šæ­¤ç‰©ä»¶&lt;/p&gt;

&lt;p&gt;e.g.
æˆ‘å€‘è¦åšç™»å…¥é é¢åŠŸèƒ½ï¼Œæˆ‘å€‘æœƒé€™æ¨£å¯«&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;29c7a9ae-6db8-4170-9673-53c1f8af5674&quot; data-name=&quot;srp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;29c7a9ae-6db8-4170-9673-53c1f8af5674&quot; data-name=&quot;srp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/f07646e50fa8d3bcac3758b214339a9c.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/fbfdba6544f6ad8f13a578e0eb118806.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä¾ç…§å–®ä¸€è·è²¬åŸå‰‡ï¼Œæˆ‘å€‘æ‡‰è©²è¦å°‡ API åŠ DB çš„åŠŸèƒ½åˆ†é–‹ï¼Œä¿®æ”¹å¦‚ä¸‹&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;99cb1a11-1833-4392-8df6-fb5702580db4&quot; data-name=&quot;srp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;99cb1a11-1833-4392-8df6-fb5702580db4&quot; data-name=&quot;srp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/05d0878df1f90659159a5416f7078fea.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/8fed9a96831bc8cffeaace60fd474399.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;æœ‰äº›æ–‡ç« æœƒèªª save, delete function ä¹Ÿé ˆæ‹†é–‹åœ¨ä¸åŒ class(DeleteDBService, SaveDBService)è™•ç†, å› ç‚º save. delete æ˜¯ä¸åŒè·è²¬ä¿®æ”¹é …ç›®, ä¸æ‡‰å‹•åˆ°å¦ä¸€å€‹ class, ä½†æˆ‘èªç‚ºé€™æ¨£ Over Design åè€Œä¸å¥½ç¶­è­·, æ‹†åˆ†è·è²¬æ‡‰é©ç•¶ä¸éåº¦&lt;/p&gt;

&lt;h3 id=&quot;open-closed-principle-ocp-é–‹æ”¾å°é–‰åŸå‰‡&quot;&gt;Open Closed Principle (OCP) é–‹æ”¾å°é–‰åŸå‰‡&lt;/h3&gt;

&lt;p&gt;å°æ–¼æ“´å……é–‹æ”¾ï¼Œå°æ–¼ä¿®æ”¹å°é–‰&lt;/p&gt;

&lt;p&gt;e.g.
æˆ‘å€‘å¸¸å¸¸æœƒéœ€è¦æª¢æŸ¥ä½¿ç”¨è€…ç™»å…¥çš„å¸³å¯†ç­‰ç­‰ï¼Œæˆ‘å€‘ä¾†åšä¸€å€‹æª¢æŸ¥å™¨å§&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;5b86e30b-dff7-4de2-9574-6c64b64a6050&quot; data-name=&quot;ocp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;5b86e30b-dff7-4de2-9574-6c64b64a6050&quot; data-name=&quot;ocp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/abada6874d79516946038fab2ca7e395.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/66cfe3ac77321120241f1dd5efae8db8.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä½†å‡å¦‚ä»Šå¤©å®¢æˆ¶æƒ³è¦å¢åŠ  Emailã€Phone Numberã€Device Mac ç­‰ç­‰çš„æ ¼å¼æª¢æŸ¥ï¼Œé‚£æˆ‘å€‘å¿…é ˆä¿®æ”¹åˆ° Validator class çš„ç¨‹å¼ç¢¼ï¼Œé€™æ¨£æœƒå½±éŸ¿åˆ°å…¶ä»–ç¨‹å¼ç¢¼ï¼Œæ‰“ç ´äº† Open-Closed Principleï¼Œå°æ–¼æ“´å……é–‹æ”¾ï¼Œå°æ–¼ä¿®æ”¹å°é–‰ï¼Œé‚£æˆ‘å€‘å¯ä»¥æ€éº¼æ”¹é€²ï¼Œå¦‚ä¸‹&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;3d58fbea-b856-4333-bf41-7b6d5f89cf3d&quot; data-name=&quot;ocp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;3d58fbea-b856-4333-bf41-7b6d5f89cf3d&quot; data-name=&quot;ocp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/4781d9bdbc57915e0e38e99bdee48dc6.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/21cf84cbe4b4c0790e62c9025e37ef9c.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å¦‚æ­¤è¦æ–°å¢ Emailã€Phone Numberã€Device Mac æ ¼å¼æª¢æŸ¥ï¼Œæˆ‘å€‘åªéœ€è¦æ–°å¢ç›¸å°æ‡‰çš„æª¢æŸ¥å™¨å³å¯ EmailValidatorã€PhoneNumberValidator åŠ DeviceMacValidatorï¼Œæ—¢ä¸æœƒå½±éŸ¿å…¶ä»–ç¨‹å¼ç¢¼(å°ä¿®æ”¹å°é–‰)ï¼Œä¹Ÿå®¹æ˜“æ“´å……æ–°çš„æª¢æŸ¥å™¨(å°æ“´å……é–‹æ”¾)&lt;/p&gt;

&lt;h3 id=&quot;liskov-substitution-principle-lsp-é‡Œæ°æ›¿æ›åŸå‰‡&quot;&gt;Liskov Substitution Principle (LSP) é‡Œæ°æ›¿æ›åŸå‰‡&lt;/h3&gt;

&lt;p&gt;ç¨‹å¼ä¸­çš„ç‰©ä»¶æ‡‰è©²æ˜¯å¯ä»¥åœ¨ä¸æ”¹è®Šç¨‹å¼æ­£ç¢ºæ€§çš„å‰æä¸‹è¢«å®ƒçš„å­é¡æ‰€æ›¿æ›çš„&lt;/p&gt;

&lt;p&gt;e.g. æˆ‘å€‘éœ€è¦è¨ˆç®—æ­£æ–¹å½¢åŠé•·æ–¹å½¢çš„é¢ç©&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;462bc33e-0a7c-4190-b5a2-0db57850de66&quot; data-name=&quot;lsp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;462bc33e-0a7c-4190-b5a2-0db57850de66&quot; data-name=&quot;lsp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/b4cc5cbc43afc9239a63e568ea7581ed.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/09845484c41ce34c42edd8f096550089.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;ä¸Šé¢çš„ä¾‹å­æˆ‘å€‘å°‡æ­£æ–¹å½¢ç¹¼æ‰¿é•·æ–¹å½¢ï¼Œä½†æ­£æ–¹å½¢çš„ getArea() å»ä¸ç¬¦åˆé•·æ–¹å½¢çš„çµæœï¼Œé€™å°±æ‰“ç ´äº† LSPã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¢åŠ ç¨‹å¼ç¢¼çš„å¥å…¨åº¦ï¼Œåœ¨ä½¿ç”¨ä¸åŒçš„å­é¡åˆ¥çš„æ™‚å€™ï¼Œå¯ä»¥å¤§å¹…åº¦çš„ä¿è­‰å½¼æ­¤ä¹‹é–“çš„ç›¸å®¹æ€§ã€‚åªè¦çˆ¶é¡åˆ¥å¯ä»¥ä½¿ç”¨ï¼ŒåŸºæœ¬ä¸Šå­é¡åˆ¥ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;/li&gt;
  &lt;li&gt;å­é¡åˆ¥å¦‚æœè¦æ–°å¢åŠŸèƒ½ï¼Œç¨ç«‹åœ¨çˆ¶é¡åˆ¥çš„åŠŸèƒ½ä¹‹å¤–ï¼Œæ‰ä¸æœƒåœ¨æ¬ç§»åˆ°å…¶ä»–å­é¡åˆ¥çš„æ™‚å€™ç™¼ç”Ÿå¥‡æ€ªçš„å•é¡Œï¼Œä¹Ÿå¯ä»¥å°‡åŠŸèƒ½åˆ‡åˆ†ä¹¾æ·¨ï¼Œå€åˆ†è·è²¬&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;interface-segregation-principle-isp-ä»‹é¢éš”é›¢åŸå‰‡&quot;&gt;Interface Segregation Principle (ISP) ä»‹é¢éš”é›¢åŸå‰‡&lt;/h3&gt;

&lt;p&gt;å¤šå€‹ç‰¹å®šå®¢æˆ¶ç«¯ä»‹é¢è¦å¥½æ–¼ä¸€å€‹å¯¬æ³›ç”¨é€”çš„ä»‹é¢&lt;/p&gt;

&lt;p&gt;e.g.
ä»Šå¤©éœ€è¦è¨­è¨ˆå¦‚ä½•è®“ä½¿ç”¨è€…æ“ä½œè»Šå­&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;c4f1f0e4-a2f8-4784-aff2-db45a4b63205&quot; data-name=&quot;isp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;c4f1f0e4-a2f8-4784-aff2-db45a4b63205&quot; data-name=&quot;isp-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/5be469e13f08dcd903d165f74649c9ce.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/68390dc1d479837df0fe70d2057d8c97.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å·¥ç¨‹å¸«å¯ä»¥é–‹å•Ÿ DebugMode, ä½†é§•é§›ä½¿ç”¨è€…ä¸æ‡‰è©²å¯ä»¥é–‹å•Ÿ DebugModeï¼Œå› æ­¤æˆ‘å€‘ä¾†æ”¹è®Šç¨‹å¼ç¢¼å°‡ enableDebugMode() éš”é›¢æˆç¨ç«‹ä»‹é¢å§!&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;926dc557-ddc1-4cb3-b151-c462951032f9&quot; data-name=&quot;isp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;926dc557-ddc1-4cb3-b151-c462951032f9&quot; data-name=&quot;isp-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/0a935483e1713954181eb0b8ad4c71ca.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/5e8adc0ccfcde8a411a555fc40f960e9.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å¦‚æ­¤å°±åªæœ‰å·¥ç¨‹å¸«èƒ½é€²å…¥ DebugMode&lt;/p&gt;

&lt;h3 id=&quot;dependency-inversion-principle-dip-ä¾è³´åå‘åŸå‰‡&quot;&gt;Dependency Inversion Principle (DIP) ä¾è³´åå‘åŸå‰‡&lt;/h3&gt;

&lt;p&gt;é«˜éšæ¨¡çµ„ä¸æ‡‰è©²ä¾è³´æ–¼ä½éšæ¨¡çµ„ï¼Œå…©è€…éƒ½æ‡‰è©²ä¾è³´æŠ½è±¡ï¼Œ
æŠ½è±¡ä¸æ‡‰è©²ä¾è³´ç´°ç¯€ï¼Œç´°ç¯€æ‡‰è©²ä¾è³´æŠ½è±¡ã€‚&lt;/p&gt;

&lt;p&gt;e.g. è¨­è¨ˆä¸€å€‹èƒ½ä¸åŒæˆ¿é–“åŠ å…¥ä¸åŒ IoT è¨­å‚™çš„ç³»çµ±ï¼Œå¯ä»¥æ–°å¢åˆªé™¤æˆ¿é–“ï¼Œä¾‹å¦‚å®¢å»³æœ‰æ™ºæ…§éŸ³ç®±ã€æº«åº¦æ§åˆ¶å™¨ï¼Œå»šæˆ¿æœ‰ç…™éœ§åµæ¸¬å™¨ç­‰â€¦&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;9f9963cb-0306-48db-bb54-4b5fa79f89c4&quot; data-name=&quot;dip-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;9f9963cb-0306-48db-bb54-4b5fa79f89c4&quot; data-name=&quot;dip-1&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/f2ec088e47cf7d24bc89ee7ef9f82fc5.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/ae27a0ba9c9bac8489d15c9f032d620b.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;å¦‚æœä»Šå¤© SQLite å› æŸäº›å•é¡Œ(é€Ÿåº¦éæ…¢ç­‰ç­‰â€¦)å› ç´ ï¼Œå°è‡´æˆ‘å€‘å¿…é ˆæ›æˆ CoreData æˆ–å…¶ä»– Database å‘¢?
ä½ æœƒç™¼ç¾æˆ‘å€‘ç„¡æ³•æŠ½æ›ï¼Œä½†å¦‚æœä¾è³´æ–¼æŠ½è±¡ç·¨å¯«ï¼Œç¨‹å¼ç¢¼å°±æœƒéå¸¸å¥½æŠ½æ›åŠæ¸¬è©¦ï¼Œä¸‹é¢è®“æˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹ç¨‹å¼ç¢¼&lt;/p&gt;

&lt;ul class=&quot;tab&quot; data-tab=&quot;56bab935-dd55-49da-be13-ec2ccf49ca6b&quot; data-name=&quot;dip-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
          &lt;a href=&quot;#&quot;&gt;Swift &lt;/a&gt;
      &lt;/li&gt;
  
      &lt;li&gt;
          &lt;a href=&quot;#&quot;&gt;Kotlin &lt;/a&gt;
      &lt;/li&gt;
  
&lt;/ul&gt;
&lt;ul class=&quot;tab-content&quot; id=&quot;56bab935-dd55-49da-be13-ec2ccf49ca6b&quot; data-name=&quot;dip-2&quot;&gt;
  
      &lt;li class=&quot;active&quot;&gt;
&lt;script src=&quot;https://gist.github.com/a6483dc7bb915e331dfdc1bac3f9e4da.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
      &lt;li&gt;
&lt;script src=&quot;https://gist.github.com/217e20c99e2528576d13ed36df60a0ab.js&quot;&gt; &lt;/script&gt;

&lt;/li&gt;
  
&lt;/ul&gt;

&lt;p&gt;æŠ½è±¡ - interface, protocol, abstract class&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¾è³´æ–¼æŠ½è±¡å¯ä»¥ä½¿æˆ‘å€‘çš„ç¨‹å¼ç¢¼æ›´åŠ æœ‰å½ˆæ€§, ä¹Ÿæ›´å¥½æŠ½æ›ä¾è³´ç‰©ä»¶&lt;/li&gt;
  &lt;li&gt;é¤Šæˆå¤šå¯«ä¸€å±¤æŠ½è±¡æˆèƒ½ä½¿ä»£ç¢¼æ›´å¥½ç¶­è­·ã€æ¸¬è©¦&lt;/li&gt;
  &lt;li&gt;æŠ½è±¡å±¤èƒ½ä½¿æˆ‘å€‘éå¸¸å®¹æ˜“çš„è£½ä½œå‡ç‰©ä»¶å¿«é€Ÿæ¸¬è©¦ç¨‹å¼é‚è¼¯&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;Design Principle æ˜¯ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆåŠ Design Pattern çš„æ ¸å¿ƒï¼Œå…¶å¯¦é€™äº›æ ¸å¿ƒæŠ€è¡“éƒ½æ˜¯é€šç”¨çš„ï¼Œåªè¦å­¸å¥½æ ¸å¿ƒæŠ€è¡“ï¼Œå­¸ç¿’å…¶ä»–èªè¨€æˆ–è¨­è¨ˆæ¶æ§‹éƒ½æœƒè®Šå¾—éå¸¸å¿«
ä¸‹ä¸€ç¯‡è¦ä¾†ä»‹ç´¹ Design Pattern çš„ç¨®é¡æœ‰å“ªäº›&lt;/p&gt;

&lt;p&gt;ä»Šå¤©æ˜¯ 2022 é™¤å¤•å¤œï¼Œæ–°çš„ä¸€å¹´ç¥å¤§å®¶éƒ½èƒ½å¤ é †åˆ©é”æˆç›®æ¨™ï¼Œæœå¤¢æƒ³é‚é€²!&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒ&quot;&gt;åƒè€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789867794529&quot;&gt;Head First Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tenlong.com.tw/products/9789866761799&quot;&gt;å¤§è©±è¨­è¨ˆæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/advanced-design-patterns-design-principles/what-are-design-principles?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Advanced Design Patterns: Design Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/programming-foundations-design-patterns-2/trying-interfaces?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Programming Foundations: Design Patterns&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/learning/design-patterns-creational/think-about-how-you-create-objects?autoAdvance=true&amp;amp;autoSkip=false&amp;amp;autoplay=true&amp;amp;resume=true&quot;&gt;Design Patterns: Creational&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Design Principle" /><category term="SOLID" /><summary type="html">å­¸ç¿’ç¨‹å¼è¨­è¨ˆå…±é€šæ ¸å¿ƒæŠ€è¡“ï¼Œé€™äº›å…±é€šæŠ€è¡“èƒ½ä½¿æˆ‘å€‘å¾ˆå¿«å­¸æœƒå¦ä¸€é–€ç¨‹å¼èªè¨€åŠæ¡†æ¶æŠ€è¡“</summary></entry><entry><title type="html">ææ‡‚ P2P æŠ€è¡“ (3) - WebRTC x AWS x KVS</title><link href="https://nickhuangcyh.github.io/blog/p2p/aws/p2p-tech-3-webrtc-kvs/" rel="alternate" type="text/html" title="ææ‡‚ P2P æŠ€è¡“ (3) - WebRTC x AWS x KVS" /><published>2022-01-04T15:13:00+00:00</published><updated>2022-01-04T15:13:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/p2p/aws/p2p-tech-3-webrtc-kvs</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/p2p/aws/p2p-tech-3-webrtc-kvs/">&lt;h2 id=&quot;webrtc&quot;&gt;WebRTC&lt;/h2&gt;

&lt;p&gt;å…¨å Web Real-Time Communicationï¼Œæ˜¯ä¸€å€‹æ”¯æ´ç¶²é ç€è¦½å™¨é€²è¡Œå³æ™‚èªéŸ³å°è©±æˆ–å½±ç‰‡å°è©±çš„ API&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/WebRTC&quot;&gt;WebRTC Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;WebRTC çš„åº•å±¤å°±æ˜¯ä½¿ç”¨ ICE ä¾†é€²è¡Œ P2P æ‰“æ´&lt;/p&gt;

&lt;h2 id=&quot;signaling-server&quot;&gt;Signaling Server&lt;/h2&gt;

&lt;p&gt;ä¿¡ä»¤ä¼ºæœå™¨ï¼Œç”¨ä¾†äº¤æ›é›™æ–¹çš„ SDP åŠ Ice candidate ä¾†å®Œæˆ P2P æ‰“æ´&lt;/p&gt;

&lt;h3 id=&quot;å¯¦ä½œ-signaling-server&quot;&gt;å¯¦ä½œ Signaling Server&lt;/h3&gt;

&lt;p&gt;WebRTC æ²’æœ‰æ˜ç¢ºå®šç¾©å¦‚ä½•å¯¦ä½œ Signaling Serverï¼Œä¸»è¦åŸå› åœ¨æ–¼å¦‚æœé›™æ–¹ä¸€é–‹å§‹å°±çŸ¥é“å°æ–¹çš„è³‡è¨Šï¼Œé‚£å…¶å¯¦å°±ä¸éœ€è¦ Signaling Server ä¾†äº¤æ›è³‡è¨Š&lt;/p&gt;

&lt;p&gt;å¯¦ä½œä¸€å€‹ Signaling Server æ–¹å¼æœ‰å¾ˆå¤šç¨®ï¼Œå¯ä»¥ç”¨ HTTP å”è­°ä¹Ÿå¯ä»¥ç”¨ WebSocket å”è­°ï¼Œåªè¦èƒ½é †åˆ©å°‡é›™æ–¹çš„è³‡è¨Šåšäº¤æ›å³å¯&lt;/p&gt;

&lt;h2 id=&quot;sdp-session-description-protocol&quot;&gt;SDP (Session Description Protocol)&lt;/h2&gt;

&lt;p&gt;æœƒè©±æè¿°å”è­°ï¼ˆSession Description Protocol æˆ–ç°¡å¯« SDPï¼‰æè¿°çš„æ˜¯æµåª’é«”çš„åˆå§‹åŒ–åƒæ•¸ã€‚æ­¤å”è­°ç”± IETF ç™¼è¡¨ç‚º &lt;a href=&quot;https://datatracker.ietf.org/doc/html/rfc2327&quot;&gt;RFC 2327&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sdp-æ ¼å¼&quot;&gt;SDP æ ¼å¼&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
&lt;span class=&quot;nv&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mhandley 2890844526 2890842807 IN IP4 126.16.64.4
&lt;span class=&quot;nv&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;SDP Seminar
&lt;span class=&quot;nv&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;A Seminar on the session description protocol
&lt;span class=&quot;nv&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://www.cs.ucl.ac.uk/staff/M.Handley/sdp.03.ps
&lt;span class=&quot;nv&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mjh@isi.edu &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Mark Handley&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;IN IP4 224.2.17.12/127
&lt;span class=&quot;nv&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2873397496 2873404696
&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;recvonly
&lt;span class=&quot;nv&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;audio 49170 RTP/AVP 0
&lt;span class=&quot;nv&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;video 51372 RTP/AVP 31
&lt;span class=&quot;nv&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;application 32416 udp wb
&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;orient:portrait
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;v=å”è­°ç‰ˆæœ¬&lt;/li&gt;
  &lt;li&gt;o=ç™¼èµ·è€…çš„ Sessionã€Session ID åŠ Session ç‰ˆæœ¬&lt;/li&gt;
  &lt;li&gt;s=Session åå­—&lt;/li&gt;
  &lt;li&gt;i=Session è³‡è¨Š&lt;/li&gt;
  &lt;li&gt;u=æœ‰é—œæœƒè­°è³‡è¨Šçš„ url&lt;/li&gt;
  &lt;li&gt;e=Email&lt;/li&gt;
  &lt;li&gt;p=æ‰‹æ©Ÿè™Ÿç¢¼&lt;/li&gt;
  &lt;li&gt;c=é€£ç·šè³‡è¨Š&lt;/li&gt;
  &lt;li&gt;t = Session æ´»å‹•æ™‚é–“&lt;/li&gt;
  &lt;li&gt;m = åª’é«”è³‡è¨Š ((media) (port) (transport) (fmt list))&lt;/li&gt;
  &lt;li&gt;a = åª’é«”å±¬æ€§&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ice-candidate&quot;&gt;Ice Candidate&lt;/h2&gt;

&lt;p&gt;Ice Candidate æè¿° WebRTC èƒ½èˆ‡ é ç¨‹è¨­å‚™é€šè¨Šæ‰€éœ€çš„å”è­°å’Œè·¯ç”±ï¼Œå•Ÿå‹• WebRTC P2P å¾Œï¼Œé€šå¸¸æœƒåœ¨é€£æ¥çš„æ¯ä¸€ç«¯æä¾›å¤šå€‹ IceCandidateï¼Œç›´åˆ°çµ•å®šæœ€ä½³ç·šè·¯é”æˆç‚ºæ­¢ï¼&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sdpMLineIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sdpMid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;candidate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a=candidate:2999745851 1 udp 2113937151 192.168.56.1 51411 typ host generation 0&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;webrtc-flow&quot;&gt;WebRTC Flow&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_webrtc.png&quot; alt=&quot;p2p_webrtc&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é›™æ–¹ Peer å…ˆé€£ä¸Š Signaling Server&lt;/li&gt;
  &lt;li&gt;PeerA å–å¾—è‡ªèº« SDP ä¸¦å‘¼å« setLocalDescription&lt;/li&gt;
  &lt;li&gt;PeerA å°‡ SDP å‚³çµ¦ Signaling Server&lt;/li&gt;
  &lt;li&gt;Signaling Server å°‡ PeerA çš„ SDP é€çµ¦ PeerB&lt;/li&gt;
  &lt;li&gt;PeerB å‘¼å« setRemoteDescription å°‡ PeerA çš„ SDP å¯«å…¥&lt;/li&gt;
  &lt;li&gt;PeerB å–å¾—è‡ªèº« SDP ä¸¦å‘¼å« setLocalDescription&lt;/li&gt;
  &lt;li&gt;PeerB å°‡ SDP å‚³çµ¦ Signaling Server&lt;/li&gt;
  &lt;li&gt;Signaling Server å°‡ PeerB çš„ SDP é€çµ¦ PeerA&lt;/li&gt;
  &lt;li&gt;PeerA å‘¼å« setRemoteDescription å°‡ PeerB çš„ SDP å¯«å…¥&lt;/li&gt;
  &lt;li&gt;PeerA å‘ Stun server è©¢å• public IP&lt;/li&gt;
  &lt;li&gt;Stun server å›æ‡‰ public IP&lt;/li&gt;
  &lt;li&gt;PeerA å‘ TURN server è©¢å• relay è³‡è¨Š (relay ip/port)&lt;/li&gt;
  &lt;li&gt;TURN server å›æ‡‰ relay è³‡è¨Š&lt;/li&gt;
  &lt;li&gt;PeerA å°‡ Ice candidates å‚³çµ¦ Signaling Server&lt;/li&gt;
  &lt;li&gt;Signaling Server å°‡ PeerA çš„ Ice candidates é€çµ¦ PeerB&lt;/li&gt;
  &lt;li&gt;PeerB å‘¼å« setRemoteIceCandidate å°‡ PeerA çš„ Ice candidates å¯«å…¥&lt;/li&gt;
  &lt;li&gt;PeerB å‘ Stun server è©¢å• public IP&lt;/li&gt;
  &lt;li&gt;Stun server å›æ‡‰ public IP&lt;/li&gt;
  &lt;li&gt;PeerB å‘ TURN server è©¢å• relay è³‡è¨Š (relay ip/port)&lt;/li&gt;
  &lt;li&gt;TURN server å›æ‡‰ relay è³‡è¨Š&lt;/li&gt;
  &lt;li&gt;PeerB å°‡ Ice candidates å‚³çµ¦ Signaling Server&lt;/li&gt;
  &lt;li&gt;Signaling Server å°‡ PeerB çš„ Ice candidates é€çµ¦ PeerA&lt;/li&gt;
  &lt;li&gt;PeerA å‘¼å« setRemoteIceCandidate å°‡ PeerB çš„ Ice candidates å¯«å…¥&lt;/li&gt;
  &lt;li&gt;P2P é€šé“å»ºç«‹å®Œæˆ&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;aws-kvs-amazon-kinesis-video-streams&quot;&gt;AWS KVS (Amazon Kinesis Video Streams)&lt;/h2&gt;

&lt;p&gt;Amazon Kinesis Video Streams ä»¥å…¨å—ç®¡åŠŸèƒ½æä¾›ç¬¦åˆæ¨™æº–çš„ WebRTC å¯¦ä½œã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Amazon Kinesis Video Streams and WebRTC å®‰å…¨åœ°å³æ™‚ä¸²æµåª’é«”ï¼Œæˆ–åœ¨ä»»ä½•æ”å½±æ©Ÿ IoT è£ç½®èˆ‡ç¬¦åˆ WebRTC æ¨™æº–çš„è¡Œå‹•æˆ– Web æ’­æ”¾å™¨ä¹‹é–“ï¼ŒåŸ·è¡Œé›™å‘éŸ³è¨Šæˆ–è¦–è¨Šäº’å‹•ã€‚å› ç‚ºæ˜¯å…¨å—ç®¡åŠŸèƒ½ï¼Œæ‚¨ä¸éœ€è¦å»ºç½®ã€åŸ·è¡Œæˆ–æ“´å±•ä»»ä½•èˆ‡ WebRTC ç›¸é—œçš„é›²ç«¯åŸºç¤è¨­æ–½ï¼Œä¾‹å¦‚è¨Šè™Ÿæˆ–åª’é«”è½‰é€ä¼ºæœå™¨ï¼Œå³å¯åœ¨æ‡‰ç”¨ç¨‹å¼å’Œè£ç½®ä¹‹é–“å®‰å…¨åœ°ä¸²æµåª’é«”ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç°¡å–®ä¾†èªª KVS å°±æ˜¯å¹«ä½ æŠŠ STUN, TURN, Signaling Server åŠ å¯†æ¬Šé™é©—è­‰ç­‰ç­‰éƒ½å¯¦ä½œäº†ï¼ŒWebRTC çš„éƒ¨åˆ†è·Ÿ KVS æ˜¯å®Œå…¨ç¨ç«‹çš„ï¼Œä½ ä¹Ÿå¯ä»¥é¸æ“‡è‡ªå·±æ¶è¨­ STUN, TURN, Signaling Server æ­é… Google WebRTC ä¹Ÿèƒ½æˆåŠŸä¸²æµï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;KVS çš„ Signaling server æ˜¯ç”¨ WebSocket å»å¯¦ä½œçš„&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„: WebSocket èˆ‡ Socket.IO æ˜¯ä¸æ˜¯ä¸€æ¨£çš„ï¼ŒSocket.IO æ˜¯æ ¹æ“š Websocket å”è­°å»å¯¦ä½œï¼ŒSocket.IO æœ‰è‡ªå·±çš„é€šè¨Šæ ¼å¼ï¼Œè«‹ä¸è¦æ‹¿ Socket.IO å¥—ä»¶å»ä¸²æ¥ KVSï¼Œæœƒå¤±æ•—ï¼Œæœ‰èˆˆè¶£å¯ä»¥åƒè€ƒé€™ç¯‡ &lt;a href=&quot;https://leesonhsu.blogspot.com/2018/07/socketwebsocketsocketio.html&quot;&gt;ã€ç­†è¨˜ã€‘Socketï¼ŒWebsocketï¼ŒSocket.io çš„å·®ç•°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;æˆæœ&quot;&gt;æˆæœ&lt;/h2&gt;

&lt;p&gt;ç†è§£é€™äº› P2P ç›¸é—œçš„çŸ¥è­˜ï¼Œæˆ‘å€‘å°±å¯ä»¥å¾ˆæ¸…æ¥šçš„å¯¦ä½œæ¯ä¸€æ­¥é©Ÿï¼Œå‡ºéŒ¯æ™‚ä¹Ÿèƒ½æ¸…æ¥šå“ªä¸€éƒ¨åˆ†å‡ºéŒ¯ï¼Œç”šè‡³æ˜¯æ›¿æ› Stun / TURN / signaling server éƒ½æ²’å•é¡Œï¼Œä¸‹é¢è²¼ä¸€ä¸‹æˆæœåœ–&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/blog/assets/images/ios_webrtc.png&quot;&gt;&lt;img src=&quot;/blog/assets/images/ios_webrtc.png&quot; alt=&quot;ios_webrtc&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;/blog/assets/images/android_webrtc.png&quot;&gt;&lt;img src=&quot;/blog/assets/images/android_webrtc.png&quot; alt=&quot;android_webrtc&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;è¸©é›·è£œå……&quot;&gt;è¸©é›·è£œå……&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;åœ¨ä¸²æ¥ AWS KVS æ™‚ï¼ŒAWS Android çš„ sample code æ˜¯ä½¿ç”¨ tyrus å¥—ä»¶é€£ signaling serverï¼Œä½†æ­¤å¥—ä»¶åœ¨èˆŠç‰ˆæœ‰ä¸€äº› SSL å•é¡Œæœ‰æ©Ÿæœƒå¤±æ•—ï¼Œæ‰€ä»¥æˆ‘æŠŠ tyrus æ›æˆ okhttp å»é€£ signaling serverï¼Œä½†ä¸€ç›´é€£ä¸ä¸Š 403 Forbiddenï¼ŒiOS ç”¨ starscream é€£ç·šæ­£å¸¸ï¼Œå¾Œä¾†æ¯”å°å…©å¹³å° URL ç™¼ç¾ï¼ŒAndroid çš„æœƒå¤šåšä¸€æ¬¡ url encodeï¼Œåœ¨ tyrus æ²’å•é¡Œï¼Œä½†åœ¨ okhttp ä¸Šæœƒæœ‰å•é¡Œ (è§£æ³•è«‹åƒè€ƒ : &lt;a href=&quot;https://github.com/awslabs/amazon-kinesis-video-streams-webrtc-sdk-android/issues/74&quot;&gt;https://github.com/awslabs/amazon-kinesis-video-streams-webrtc-sdk-android/issues/74&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;P2P çš„åŸºæœ¬è§€å¿µå¤§è‡´å°±åˆ°é€™é‚Šï¼Œå¦‚æœæƒ³è¦æ›´æ·±å…¥çš„ç†è§£ P2P çš„æœ‹å‹ï¼Œå¯ä»¥çœ‹åƒè€ƒè³‡æºæ¬„ä¸­çš„æ–‡ç« ï¼Œæˆ–ç›´æ¥çœ‹ RFC ï¼Œè£¡é¢æœƒèªªåˆ°æ¯å€‹å”è­°çš„æ ¼å¼ç´°ç¯€ï¼&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒè³‡æº&quot;&gt;åƒè€ƒè³‡æº&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-TW/docs/Web/API/WebRTC_API&quot;&gt;WebRTC API&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/WebRTC&quot;&gt;WebRTC Wiki&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BC%9A%E8%AF%9D%E6%8F%8F%E8%BF%B0%E5%8D%8F%E8%AE%AE&quot;&gt;SDP Wiki&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/RTCIceCandidate&quot;&gt;RTCIceCandidate&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/zh_tw/kinesisvideostreams-webrtc-dg/latest/devguide/what-is-kvswebrtc.html&quot;&gt;Amazon Kinesis Video Streams for WebRTC&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.52im.net/thread-50-1-1.html&quot;&gt;ã€ŠP2P æŠ€æœ¯è¯¦è§£ã€‹ç³»åˆ—æ–‡ç« &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.flaticon.com/&quot;&gt;flaticon&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="P2P" /><category term="AWS" /><category term="iOS" /><category term="Android" /><category term="WebRTC" /><category term="KVS" /><summary type="html">WebRTC x AWS x KVS</summary></entry><entry><title type="html">ææ‡‚ P2P æŠ€è¡“ (2) - STUN x TURN x ICE</title><link href="https://nickhuangcyh.github.io/blog/p2p/p2p-tech-2-stun-turn-ice/" rel="alternate" type="text/html" title="ææ‡‚ P2P æŠ€è¡“ (2) - STUN x TURN x ICE" /><published>2022-01-04T07:09:00+00:00</published><updated>2022-01-04T07:09:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/p2p/p2p-tech-2-stun-turn-ice</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/p2p/p2p-tech-2-stun-turn-ice/">&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;ä¸Šä¸€ç¯‡ä»‹ç´¹å®Œä¸­å¿ƒåŒ–ã€å»ä¸­å¿ƒåŒ–ã€åˆ†ä½ˆå¼ç¶²è·¯ä»¥åŠ IPv4ã€NATã€NAT é¡å‹ï¼Œä½†æˆ‘å€‘ä¾èˆŠé‚„æœ‰äº›å•é¡Œæœªè§£æ±º&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A, B å…©ç«¯è¦å¦‚ä½•çŸ¥é“å½¼æ­¤çš„å…§éƒ¨ç¶²è·¯ IP åŠå¤–éƒ¨ç¶²è·¯ IP (STUN)&lt;/li&gt;
  &lt;li&gt;ä¸Šç¯‡æœ‰æåˆ° NAT é¡å‹å¦‚æœæ˜¯å°ç¨±å‹æ™‚ï¼Œæœƒç„¡æ³•æ‰“é€š P2Pï¼Œç•¶é‡åˆ°æ­¤æƒ…å½¢æ™‚è©² (TURN)&lt;/li&gt;
  &lt;li&gt;æœ‰æ²’æœ‰ä¸€ç¨®æ¡†æ¶æ•´åˆé€™æ•´å€‹ P2P æµç¨‹ (ICE)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;stun&quot;&gt;STUN&lt;/h2&gt;

&lt;p&gt;STUNï¼ˆSession Traversal Utilities for NATï¼ŒNAT å°è«‡ç©¿è¶Šæ‡‰ç”¨ç¨‹å¼ï¼‰æ˜¯ä¸€ç¨®ç¶²è·¯å”å®šï¼Œå®ƒå…è¨±ä½æ–¼ NATï¼ˆæˆ–å¤šé‡ NATï¼‰å¾Œçš„å®¢æˆ¶ç«¯æ‰¾å‡ºè‡ªå·±çš„å…¬ç¶²ä½å€ï¼ŒæŸ¥å‡ºè‡ªå·±ä½æ–¼å“ªç¨®é¡å‹çš„ NAT ä¹‹å¾Œä»¥åŠ NAT ç‚ºæŸä¸€å€‹æœ¬åœ°åŸ æ‰€ç¹«çµçš„ Internet ç«¯åŸ ã€‚é€™äº›è³‡è¨Šè¢«ç”¨ä¾†åœ¨å…©å€‹åŒæ™‚è™•æ–¼ NAT è·¯ç”±å™¨ä¹‹å¾Œçš„ä¸»æ©Ÿä¹‹é–“å»ºç«‹ UDP é€šä¿¡ã€‚è©²å”å®šç”± RFC 5389 å®šç¾©ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/STUN&quot;&gt;STUN Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_stun.png&quot; alt=&quot;p2p_stun&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;turn&quot;&gt;TURN&lt;/h2&gt;

&lt;p&gt;TURNï¼ˆå…¨å Traversal Using Relay NATï¼‰ï¼Œæ˜¯ä¸€ç¨®è³‡æ–™å‚³è¼¸å”å®šï¼ˆdata-transfer protocolï¼‰ã€‚å…è¨±åœ¨ TCP æˆ– UDP çš„é€£ç·šä¸Šè·¨è¶Š NAT æˆ–é˜²ç«ç‰†ã€‚&lt;/p&gt;

&lt;p&gt;TURN æ˜¯ä¸€å€‹ client-server å”å®šã€‚TURN çš„ NAT ç©¿é€æ–¹æ³•èˆ‡ STUN é¡ä¼¼ï¼Œéƒ½æ˜¯é€šéå–å¾—æ‡‰ç”¨å±¤ä¸­çš„å…¬æœ‰ä½å€é”åˆ° NAT ç©¿é€ã€‚ä½†å¯¦ç¾ TURN client çš„çµ‚ç«¯å¿…é ˆåœ¨é€šè¨Šé–‹å§‹å‰èˆ‡ TURN server é€²è¡Œäº’å‹•ï¼Œä¸¦è¦æ±‚ TURN server ç”¢ç”Ÿâ€relay portâ€ï¼Œä¹Ÿå°±æ˜¯ relayed-transport-addressã€‚é€™æ™‚ TURN server æœƒå»ºç«‹ peerï¼Œå³é ç«¯ç«¯é»ï¼ˆremote endpointsï¼‰ï¼Œé–‹å§‹é€²è¡Œä¸­ç¹¼ï¼ˆrelayï¼‰çš„å‹•ä½œï¼ŒTURN client åˆ©ç”¨ relay port å°‡è³‡æ–™å‚³é€è‡³ peerï¼Œå†ç”± peer è½‰å‚³åˆ°å¦ä¸€æ–¹çš„ TURN clientã€‚&lt;/p&gt;

&lt;p&gt;ç•¶ç„¡æ³•æ‰“é€š NAT æ™‚ï¼Œå°±æœƒéœ€è¦ç”¨ TURN çš„æ–¹å¼ä¾†è§£æ±º NAT ç©¿é€&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/TURN&quot;&gt;TURN Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_turn.png&quot; alt=&quot;p2p_turn&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ice&quot;&gt;ICE&lt;/h2&gt;

&lt;p&gt;ICEï¼ˆInteractive Connectivity Establishmentï¼‰ï¼Œä¸€ç¨®ç¶œåˆæ€§çš„ NAT ç©¿è¶Šçš„æŠ€è¡“ã€‚&lt;/p&gt;

&lt;p&gt;äº’å‹•å¼é€£æ¥å»ºç«‹æ˜¯ç”± IETF çš„ MMUSIC å·¥ä½œçµ„é–‹ç™¼å‡ºä¾†çš„ä¸€ç¨® frameworkï¼Œå¯æ•´åˆå„ç¨® NAT ç©¿é€æŠ€è¡“ï¼Œå¦‚ STUNã€TURNï¼ˆTraversal Using Relay NATï¼Œä¸­ç¹¼ NAT å¯¦ç¾çš„ç©¿é€ï¼‰ã€RSIPï¼ˆRealm Specific IPï¼Œç‰¹å®šåŸŸ IPï¼‰ç­‰ã€‚è©² framework å¯ä»¥è®“ SIP çš„å®¢æˆ¶ç«¯åˆ©ç”¨å„ç¨® NAT ç©¿é€æ–¹å¼æ‰“ç©¿é ç¨‹çš„é˜²ç«ç‰†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BA%92%E5%8B%95%E5%BC%8F%E9%80%A3%E6%8E%A5%E5%BB%BA%E7%AB%8B&quot;&gt;ICE Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_ice.png&quot; alt=&quot;p2p_ice&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;ç°¡å–®ä¾†èªª&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;STUN Server æ˜¯è®“ client ç«¯è©¢å•è‡ªèº«çš„ Public IPï¼Œé›™æ–¹äº¤æ› Public IP ä¾†åš P2P&lt;/li&gt;
  &lt;li&gt;TURN Server æ˜¯ç•¶ NAT ç©¿é€å¤±æ•—æ™‚(é€šå¸¸æ˜¯ Symmetric NAT)çš„æ›¿ä»£æ–¹æ¡ˆï¼Œé€é TURN server åšè³‡æ–™çš„è½‰å‚³ï¼Œä¹Ÿç¨±ç‚º Relayï¼Œèµ° TURN æ™‚ TURN Server å‚³è¼¸æµé‡ç­‰ç­‰å°±æœƒéœ€è¦é¡å¤–è²»ç”¨&lt;/li&gt;
  &lt;li&gt;ICE æ˜¯ä¸€ç¨®æ¡†æ¶ï¼Œçµåˆäº† STUN åŠ TURN ç­‰ç­‰å”è­°ï¼Œè§£æ±ºå–®ä¸€å”è­°ç¼ºé™·çš„å•é¡Œï¼Œåˆ—å¦‚é‡ä¸Š Symmetric NAT ä½†æ²’æœ‰å¯¦ä½œ TURNï¼Œé›™æ–¹å°±æœƒç„¡æ³•é€šè¨Šï¼&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é€™ç¯‡ä»‹ç´¹äº† STUNã€TURN åŠ ICEï¼Œä¸‹ä¸€ç¯‡å°‡ä»‹ç´¹ Signaling Server, WebRTC ä»¥åŠ AWS KVS for WebRTCï¼&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒè³‡æº&quot;&gt;åƒè€ƒè³‡æº&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/STUN&quot;&gt;STUN&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/TURN&quot;&gt;TURN&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BA%92%E5%8B%95%E5%BC%8F%E9%80%A3%E6%8E%A5%E5%BB%BA%E7%AB%8B&quot;&gt;ICE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.52im.net/thread-50-1-1.html&quot;&gt;ã€ŠP2P æŠ€æœ¯è¯¦è§£ã€‹ç³»åˆ—æ–‡ç« &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.flaticon.com/&quot;&gt;flaticon&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="P2P" /><category term="iOS" /><category term="Android" /><category term="STUN" /><category term="TURN" /><category term="ICE" /><summary type="html">STUN x TURN x ICE</summary></entry><entry><title type="html">ææ‡‚ P2P æŠ€è¡“ (1) - P2P x IPv4 x NAT</title><link href="https://nickhuangcyh.github.io/blog/p2p/p2p-tech-1-ipv4-nat/" rel="alternate" type="text/html" title="ææ‡‚ P2P æŠ€è¡“ (1) - P2P x IPv4 x NAT" /><published>2022-01-03T15:45:03+00:00</published><updated>2022-01-03T15:45:03+00:00</updated><id>https://nickhuangcyh.github.io/blog/p2p/p2p-tech-1-ipv4-nat</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/p2p/p2p-tech-1-ipv4-nat/">&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;ä¹‹å‰å·¥ä½œä¸Šé‡åˆ°éœ€è¦å°‡è‡ªå®¶ IPCam èˆ‡ iOS/Android æ‰‹æ©Ÿåš P2P ä¸²æµå½±éŸ³ï¼Œç ”ç©¶äº†è¨±å¤šæœ‰é—œ P2P çš„æŠ€è¡“ï¼Œå› æ­¤æƒ³å¯«ä¸€ç³»åˆ—æœ‰é—œ P2P æŠ€è¡“çš„æ–‡ç« ï¼&lt;/p&gt;

&lt;h2 id=&quot;p2p&quot;&gt;P2P&lt;/h2&gt;

&lt;h3 id=&quot;ç‚ºä»€éº¼æœƒéœ€è¦-p2p&quot;&gt;ç‚ºä»€éº¼æœƒéœ€è¦ P2P&lt;/h3&gt;

&lt;p&gt;åœ¨äº†è§£ä¸€é–€æŠ€è¡“å‰ï¼Œæˆ‘å€‘å…ˆä¾†çœ‹çœ‹ç‚ºä»€éº¼æœƒéœ€è¦é€™é–€æŠ€è¡“ï¼Œé€™é–€æŠ€è¡“æ˜¯ç‚ºäº†è§£æ±ºä»€éº¼å•é¡Œ&lt;/p&gt;

&lt;h2 id=&quot;centralized-vs-decentralized-vs-distributed&quot;&gt;Centralized vs Decentralized vs Distributed&lt;/h2&gt;

&lt;h3 id=&quot;ä¸­å¿ƒåŒ–ç¶²è·¯-centralized&quot;&gt;ä¸­å¿ƒåŒ–ç¶²è·¯ (Centralized)&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_centralized.png&quot; alt=&quot;p2p_centralized&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰ client éƒ½é€£æ¥åˆ°åŒä¸€å° Serverï¼ŒServer æ“æœ‰æ‰€æœ‰ client çš„æ•¸æ“šè¨Šæ¯&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¯ä»¥æƒ³æˆæ˜¯åœ‹å®¶å¤®è¡Œç™¼è¡Œè²¨å¹£ï¼Œæ‰€æœ‰äººçš„éŒ¢éƒ½ä¾†è‡ªåœ‹å®¶å¤®è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;å„ªé»
    &lt;ul&gt;
      &lt;li&gt;éƒ¨ç½²ç°¡å–®å¥½ç¶­è­·&lt;/li&gt;
      &lt;li&gt;é›†ä¸­ç®¡ç†æ•¸æ“š&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼ºé»
    &lt;ul&gt;
      &lt;li&gt;å®‰å…¨åŠéš±ç§é¢¨éšª (ä¸­å¿ƒ server é­ç ´è§£ä¸²æ”¹ï¼Œå…¨éƒ¨éƒ½æœƒå—å½±éŸ¿)&lt;/li&gt;
      &lt;li&gt;é›¢ Server è¼ƒé çš„ client æ‹¿è³‡æ–™çš„æ™‚é–“æœƒæ›´é•·&lt;/li&gt;
      &lt;li&gt;server ä¸€ä½†æ•…éšœï¼Œå…¶ä»– client éƒ½ä¸å¯ä½¿ç”¨&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å»ä¸­å¿ƒåŒ–ç¶²è·¯-decentralized&quot;&gt;å»ä¸­å¿ƒåŒ–ç¶²è·¯ (Decentralized)&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_decentralized.png&quot; alt=&quot;p2p_decentralized&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é¡§åæ€ç¾©å°±æ˜¯ä¸åªæœ‰ä¸€å° serverï¼Œæœƒæœ‰å¤šå° server ï¼Œæ‰€ä»¥ç•¶ä¸€å°æˆ–å¤šå° server æ•…éšœæ™‚ï¼Œclient é‚„æ˜¯å¯ä»¥ç¹¼çºŒå¾å…¶ä»– server å­˜å–æ•¸æ“š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¯ä»¥æƒ³æˆæ˜¯å¾ˆå¤šéŠ€è¡Œå¯ä»¥å­˜éŒ¢é ˜éŒ¢ï¼Œæœ‰ç¾éŠ€ã€é«˜ç››ã€æ‘©æ ¹ã€å¯Œåœ‹ç­‰ç­‰éŠ€è¡Œï¼Œä¸”æ¯å®¶éƒ½èƒ½äº’ç›¸è½‰éŒ¢&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;å„ªé»
    &lt;ul&gt;
      &lt;li&gt;æ¯”&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸­å¿ƒåŒ–ç¶²è·¯&lt;/code&gt;æœ‰è¼ƒé«˜çš„å®¹éŒ¯ç‡ (å› ç‚ºæœ‰å¤šå€‹ server)&lt;/li&gt;
      &lt;li&gt;æ›´å¥½çš„æ€§èƒ½ (åœ¨ä¸€äº›ç”¨æˆ¶å¤šçš„åœ°å€æ–°å¢ç¯€é»)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼ºé»
    &lt;ul&gt;
      &lt;li&gt;å®‰å…¨åŠéš±ç§é¢¨éšª (èˆ‡ä¸­å¿ƒåŒ–ä¸€æ¨£)&lt;/li&gt;
      &lt;li&gt;è¼ƒé«˜ç¶­è­·æˆæœ¬ (ç³»çµ±è¨­è¨ˆè¼ƒè¤‡é›œå¤šè®Š)&lt;/li&gt;
      &lt;li&gt;è¼ƒé›£éƒ¨ç½²&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;åˆ†ä½ˆå¼ç¶²è·¯-distributed&quot;&gt;åˆ†ä½ˆå¼ç¶²è·¯ (Distributed)&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_distributed.png&quot; alt=&quot;p2p_distributed&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é¡ä¼¼ Decentralized ï¼Œ æ²’æœ‰å”¯ä¸€çš„ä¸­å¿ƒ serverï¼Œç”¨æˆ¶é–“å¯ä»¥å…±äº«è³‡æ–™æ‰€æœ‰æ¬Šï¼Œæ¶ˆé™¤äº†ä¸­å¿ƒ server çš„æ¦‚å¿µï¼Œå¦‚æ­¤å¯ä»¥é¿å…ä¸­å¿ƒ server æ•…éšœå°è‡´æ‰€æœ‰ user ç„¡æ³•ä½¿ç”¨çš„å•é¡Œï¼Œinternet å°±æ˜¯ä¸€å€‹åˆ†ä½ˆå¼ç¶²è·¯ï¼Œp2p ä¹Ÿå±¬æ–¼æ­¤é¡&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¯ä»¥æƒ³æˆæ˜¯ç›®å‰çš„å€å¡Šéˆæ¯”ç‰¹å¹£ï¼Œä¸¦æ²’æœ‰åƒå¤®éŠ€éŠ€è¡Œçš„è§’è‰²ï¼Œè²¨å¹£æ˜¯ç”±éˆä¸Šçš„æ‰€æœ‰ä¸»æ©Ÿå¹«ä½ åšé©—è­‰äº¤æ˜“ç´€éŒ„ç­‰ç­‰ï¼Œå¿…é ˆè¦ä¸²æ”¹è¶…é 51% ä»¥ä¸Šçš„ä¸»æ©Ÿæ‰èƒ½æˆåŠŸä¸²æ”¹è³‡è¨Šï¼Œè¼ƒå®‰å…¨&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;å„ªé»
    &lt;ul&gt;
      &lt;li&gt;æ¥µé«˜çš„å®¹éŒ¯ç‡&lt;/li&gt;
      &lt;li&gt;è³‡æ–™é€æ˜å®‰å…¨ï¼Œä¸æ˜“é­ä¸²æ”¹&lt;/li&gt;
      &lt;li&gt;è³‡æºå…±äº«&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼ºé»
    &lt;ul&gt;
      &lt;li&gt;è¼ƒé«˜ç¶­è­·æˆæœ¬ (ç³»çµ±è¨­è¨ˆè¼ƒè¤‡é›œå¤šè®Š)&lt;/li&gt;
      &lt;li&gt;è¼ƒé›£éƒ¨ç½²&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸‰ç¨®ç¶²è·¯æ–¹å¼çš†æœ‰å„è‡ªå„ªé»ï¼Œå¯ä»¥ä¾ç…§é‡åˆ°çš„æƒ…æ³å»è¨­è¨ˆï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨ IoT æ‡‰ç”¨ä¸­ï¼Œå‡å¦‚ä½ è¦æ§åˆ¶å®¶ä¸­çš„ IPCamï¼Œå°±æœƒæœ‰ä»¥ä¸‹å…©ç¨®åšæ³•&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸­å¿ƒåŒ–æ–¹å¼ç‚ºé€é Server è½‰ç™¼ command çµ¦ IPCam
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;/blog/assets/images/p2p_centralized_connect.png&quot; alt=&quot;p2p_centralized_connect&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;é€™ç¨®ä½œæ³•çš„å„ªé»åœ¨æ–¼å¥½éƒ¨ç½²ä¿®æ”¹ï¼Œæœ‰æ–°å¢åŠŸèƒ½æ™‚åªè¦ Server æ”¹å®Œéƒ¨ç½²ï¼Œå…¶ä»–è¨­å‚™å°±å¯æ›´æ–°æ”¯æ´æ­¤åŠŸèƒ½ï¼Œç¼ºé»å°±æ˜¯ Server åªè¦æ•…éšœå°±å®Œå…¨ä¸èƒ½æ§åˆ¶ IoT è£ç½®ï¼Œä¸” Server çš„ç¡¬é«”æ•ˆèƒ½è¦å¾ˆå¥½æ‰è¶³ä»¥æ‡‰å°é¾å¤§çš„ clientï¼Œéœ€è¦æ¯æœˆä¸€ç­†ç§Ÿ Server æ©Ÿå™¨åŠæµé‡çš„è²»ç”¨&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;åˆ†ä½ˆå¼æ–¹å¼ç‚ºä¸é€é Server ç›´æ¥å‘ IPCam ä¸‹é”æŒ‡ä»¤
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;/blog/assets/images/p2p_distributed_connect.png&quot; alt=&quot;p2p_distributed_connect&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;é€™ç¨®ä½œæ³•çš„å„ªé»åœ¨æ–¼ä¸éœ€è¦æ¯æœˆä¸€ç­†ç§Ÿ server æ©Ÿå™¨åŠæµé‡çš„è²»ç”¨ï¼Œä¸æœƒæœ‰ Server æ•…éšœå°è‡´ç„¡æ³•æ“ä½œ IoT è£ç½®çš„å•é¡Œï¼Œç¡¬é«”æ•ˆèƒ½ä¹Ÿä¸éœ€è¦å¾ˆå¥½ï¼Œç¼ºé»å°±æ˜¯éƒ¨ç½²ç¨‹å¼è®Šå¾—è¤‡é›œï¼Œå› ç‚ºä¸æ˜¯æ¯å€‹äººéƒ½æœƒå®šæœŸæ›´æ–°æ‰‹æ©Ÿ app åŠ IoT Firmwareï¼Œé‚„æœ‰ç¨‹å¼ç¢¼æœƒè®Šå¾—è¤‡é›œï¼Œéœ€è¦è™•ç† p2p tunnel æ–·ç·šé‡æ–° p2p æµç¨‹ï¼Œä¹Ÿå«å®¹æ˜“ç™¼ç”Ÿæ–·ç·šé‡é€£ï¼Œe.g. æ‰‹æ©Ÿç”± 4G/5G ç’°å¢ƒèµ°åˆ°æœ‰ Wifi ç’°å¢ƒï¼Œç¶²å¡è‡ªå‹•åˆ‡æ›æˆ Wifi å°±æœƒå°è‡´æ–·ç·šéœ€é‡æ–° p2pï¼&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç–‘å• : åˆ†ä½ˆå¼æ–¹å¼åœ¨è¤‡é›œçš„ Internet ä¸‹ï¼Œå¦‚ä½•è®“æ‰‹æ©Ÿèˆ‡ IoT è£ç½®æºé€šï¼Œå°±æ˜¯æ¥ä¸‹ä¾†æˆ‘å€‘è¦è¬›è§£ P2P æŠ€è¡“çš„éƒ¨åˆ†&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;ä»€éº¼æ˜¯-p2p-peer-to-peer&quot;&gt;ä»€éº¼æ˜¯ P2P (Peer to Peer)&lt;/h2&gt;

&lt;p&gt;P2P æ˜¯ä¸€ç¨®ç„¡ä¸­å¿ƒåŒ–çš„æŠ€è¡“ï¼Œæ¯ä¸€å€‹ client æ—¢æ˜¯ client ä¹Ÿæ˜¯ serverï¼Œåœ¨æ¯å°ä¸»æ©Ÿçš†å­˜åœ¨å…±äº«çš„æ•¸æ“šï¼Œä»¥æ­¤é™ä½è³‡æ–™éºå¤±å®‰å…¨æ€§ç­‰ç­‰çš„é¢¨éšªï¼&lt;/p&gt;

&lt;h2 id=&quot;ipv4&quot;&gt;IPv4&lt;/h2&gt;

&lt;p&gt;Internet èƒ½å¤ å¦‚æ­¤æˆåŠŸé€²å…¥äººé¡çš„ç”Ÿæ´»ä¸­ï¼ŒIP çš„è¨­è¨ˆå¯ä»¥èªªæ˜¯éå¸¸é‡è¦çš„ä¸€å€‹åŸºç¤ï¼Œå¯ä»¥æŠŠ IP æƒ³æˆä½ åœ¨ Internet ä¸–ç•Œè£¡çš„åœ°å€ï¼Œä»»ä½•äººè¦å¯„ä¿¡çµ¦ä½ éƒ½éœ€è¦çŸ¥é“ä½ çš„åœ°å€æ‰èƒ½èˆ‡ä½ é€šä¿¡ï¼ŒIPv4 çš„è¨­è¨ˆå°±æ˜¯å¸Œæœ›å¯ä»¥å®¹ç´å¤§å®¶ä¸Šç¶²ï¼ŒIPv4 ç¸½å…±æœ‰ 4 * 8(bits) = 32 bitsï¼Œå¤§ç´„ç‚º 43 å„„ï¼Œåœ¨ç•¶æ™‚èªç‚ºå·²ç¶“éå¸¸è¶³å¤ ä½¿ç”¨ï¼Œä½†å¦‚ä»Šåœ¨ Internet é«˜é€Ÿç™¼å±•ä¸‹ï¼ŒIPv4 å·²ç¶“ä¸å¤ ç”¨äº†ï¼Œæ‰€ä»¥ç¶²è·¯å°ˆå®¶ä¸€æ–¹é¢å°‹æ‰¾ IPv4 æ›¿ä»£æ–¹æ¡ˆ(ä¹Ÿå°±æ˜¯ IPv6)ï¼Œä¸€æ–¹é¢ç ”ç©¶å¦‚ä½•æ¸›ç·© IPv4 è€—ç›¡çš„å•é¡Œï¼Œæ–¼æ˜¯ NAT èª•ç”Ÿäº†ï¼&lt;/p&gt;

&lt;h2 id=&quot;nat-network-address-translation&quot;&gt;NAT (Network Address Translation)&lt;/h2&gt;

&lt;p&gt;å°±å¦‚åŒå­—é¢ä¸Šçš„æ„æ€ï¼Œä»–æœƒåœ¨ç§æœ‰ç¶²åŸŸåŠå…¬æœ‰ç¶²åŸŸä¹‹é–“åšå°‡å°åŒ…çš„ IP åšè½‰æ›ï¼Œæ ¹æ“š &lt;a href=&quot;https://datatracker.ietf.org/doc/rfc1918/&quot;&gt;RFC1918&lt;/a&gt; ä¿ç•™äº†ä¸‰æ®µ IP åœ°å€çµ¦å…§éƒ¨ç¶²è·¯åšä½¿ç”¨ï¼Œ10.0.0.0-10.255.255.255ï¼›172.16.0.0-172.31.255.255ï¼›192.168.0.0-192.168.255.255ï¼Œé€™äº›åœ°å€åœ¨å…¬æœ‰ç¶²è·¯ä¸Šæ˜¯æ²’æœ‰æ„ç¾©çš„ï¼Œä¸”ä¸éœ€åƒ IANA åšç”³è«‹ï¼Œå¦‚æ­¤å°±å¤§å¤§å¢åŠ äº† IPv4 ç’°å¢ƒå¯ä»¥å®¹ç´çš„ä¸Šç¶²è£ç½®ï¼Œå› ç‚ºä¸€å€‹çµ„ç¹”åªéœ€è¦ä¸€å€‹å…¬æœ‰ IP å³å¯è®“æ‰€æœ‰å…§éƒ¨è£ç½®é€£ä¸Š Internetï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_1.png&quot; alt=&quot;p2p_nat_1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ NAT é€™æ¨£çš„è¨­è¨ˆæ˜¯æœ‰ç¼ºé»çš„ï¼Œå¤–éƒ¨ç¶²è·¯ä¸»æ©Ÿç„¡æ³•ç›´æ¥èˆ‡åœ¨ NAT è·¯ç”±å™¨å…§çš„å…§ç¶²ä¸»æ©Ÿé€²è¡Œé€£ç·š&lt;/p&gt;

&lt;p&gt;ä¸€èˆ¬æ²’æœ‰ NAT æƒ…æ³ä¸‹ï¼ŒInternet ä¸Šçš„å…©å°ä¸»æ©Ÿåªè¦çŸ¥é“å½¼æ­¤ IP å°±èƒ½é€²è¡Œé€šè¨Š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_2.png&quot; alt=&quot;p2p_nat_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æœ‰ä¸€æ–¹æ–¼ NAT æƒ…æ³ä¸‹ï¼Œå¤–éƒ¨ç¶²è·¯ä¸»æ©Ÿ B è¦èˆ‡å…§éƒ¨ç¶²è·¯ä¸»æ©Ÿ A é€šè¨Šï¼Œå°±æœƒé‡åˆ° NAT ä¸çŸ¥é“è¦å°‡ä¾†è‡ª B çš„å°åŒ…è½‰çµ¦å“ªä¸€å°å…§éƒ¨ä¸»æ©Ÿ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_3.png&quot; alt=&quot;p2p_nat_3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é™¤é A å·²ç¶“å…ˆè¨ªå•é B ä¸»æ©Ÿçš„æƒ…æ³ä¸‹ï¼ŒNAT æœƒå°‡ A çš„è½‰å€ç´€éŒ„åœ¨ mapping table ä¸­ï¼Œä¹‹å¾Œç”± B ç™¼çµ¦ A çš„å°åŒ…ï¼ŒNAT å°±æœƒé€é mapping table è½‰å€å°‡å°åŒ…æ­£ç¢ºè½‰ç™¼çµ¦ A&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_4.png&quot; alt=&quot;p2p_nat_4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†å¦‚æœå…©å°ä¸»æ©Ÿçš†åœ¨ NAT ä¸‹ï¼Œæ­¤æ™‚ä¸ç®¡æ˜¯ç”± A æˆ– B ç™¼èµ· (A â†’ B æˆ– B â†’ A)ï¼Œéƒ½ç„¡æ³•é€£æ¥åˆ°å°æ–¹ï¼Œå› ç‚ºå…©é‚Šçš„ mapping table éƒ½æ˜¯ç©ºçš„æ²’æœ‰ç´€éŒ„&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_5.png&quot; alt=&quot;p2p_nat_5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ™‚å°±å¿…é ˆè¦ç”±ä»»ä¸€æ–¹å…ˆç™¼èµ·å°åŒ…ï¼Œå‡è¨­ç”± A ç™¼èµ· (1)ï¼Œæ­¤æ™‚ A çš„ NAT mapping table æœƒç•™ä¸‹ A çš„è½‰æ› IP (2)ï¼Œä½†å°åŒ…åˆ°äº† B çš„ NAT æ™‚ï¼Œå›  B çš„ NAT mapping table ç‚ºç©ºï¼Œæ‰€ä»¥æœƒå…ˆå¤±æ•— (3)ï¼Œå†ä¾†ç”± B ç™¼èµ·å°åŒ…çµ¦ A (4)ï¼Œæœƒåœ¨ B NAT mapping table ç•™ä¸‹ B çš„è½‰æ› IP (5)ï¼Œå°åŒ…åˆ°äº† A NAT å¾Œ (6)ï¼Œå›  A çš„ NAT mapping table å­˜åœ¨ A çš„ IPï¼Œæ‰€ä»¥å°åŒ…å¯ä»¥é †åˆ©åˆ°é” A (7)ï¼ŒA åœ¨ç™¼é€å°åŒ…åˆ° B (8)ï¼Œæ­¤æ™‚é›™æ–¹çš„ NAT mapping table çš†æœ‰ç´€éŒ„(9, 10)ï¼Œåœ¨ NAT è£¡çš„ Client å°±èƒ½é †åˆ©ç›¸äº’é€šè¨Šï¼Œæ­¤æ™‚ P2P å°±æˆåŠŸäº†ï¼Œåä¹‹äº¦ç„¶&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_nat_6.png&quot; alt=&quot;p2p_nat_6&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;nat-é¡å‹&quot;&gt;NAT é¡å‹&lt;/h2&gt;

&lt;h3 id=&quot;full-cone-nat-å®Œå…¨éŒå‹-nat&quot;&gt;Full-cone NAT (å®Œå…¨éŒå‹ NAT)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸€æ—¦å…§éƒ¨ä½å€ï¼ˆiAddr:iPortï¼‰å°æ˜ åˆ°å¤–éƒ¨ä½å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰ç™¼è‡ª iAddr:iPort çš„å°åŒ…éƒ½ç¶“ç”± eAddr:ePort å‘å¤–å‚³é€ã€‚&lt;/li&gt;
  &lt;li&gt;ä»»æ„å¤–éƒ¨ä¸»æ©Ÿéƒ½èƒ½ç¶“ç”±ç™¼é€å°åŒ…çµ¦ eAddr:ePort åˆ°é” iAddr:iPortã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_full_cone_nat.png&quot; alt=&quot;p2p_full_cone_nat&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;restricted-cone-nat-å—é™éŒå‹-nat&quot;&gt;Restricted cone NAT (å—é™éŒå‹ NAT)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸€æ—¦å…§éƒ¨ä½å€ï¼ˆiAddr:iPortï¼‰å°æ˜ åˆ°å¤–éƒ¨ä½å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰ç™¼è‡ª iAddr:iPort çš„å°åŒ…éƒ½ç¶“ç”± eAddr:ePort å‘å¤–å‚³é€ã€‚&lt;/li&gt;
  &lt;li&gt;å”¯ iAddr:iPort æ›¾ç¶“ç™¼é€å°åŒ…åˆ°å¤–éƒ¨ä¸»æ©Ÿï¼ˆnAddr:anyï¼‰ï¼Œå¤–éƒ¨ä¸»æ©Ÿæ‰èƒ½ç¶“ç”±ç™¼é€å°åŒ…çµ¦ eAddr:ePort åˆ°é” iAddr:iPortã€‚ï¼ˆè¨»ï¼šany æŒ‡å¤–éƒ¨ä¸»æ©ŸæºåŸ ä¸å—é™åˆ¶ã€‚ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_restricted_cone_nat.png&quot; alt=&quot;p2p_full_cone_nat&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;port-restricted-cone-nat-ç«¯å£å—é™éŒå‹-nat&quot;&gt;Port-Restricted cone NAT (ç«¯å£å—é™éŒå‹ NAT)&lt;/h3&gt;

&lt;p&gt;é¡ä¼¼å—é™åˆ¶éŒå½¢ NATï¼ˆRestricted cone NATï¼‰ï¼Œä½†æ˜¯é‚„æœ‰åŸ é™åˆ¶ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸€æ—¦å…§éƒ¨ä½å€ï¼ˆiAddr:iPortï¼‰å°æ˜ åˆ°å¤–éƒ¨ä½å€ï¼ˆeAddr:ePortï¼‰ï¼Œæ‰€æœ‰ç™¼è‡ª iAddr:iPort çš„å°åŒ…éƒ½ç¶“ç”± eAddr:ePort å‘å¤–å‚³é€ã€‚&lt;/li&gt;
  &lt;li&gt;åœ¨å—é™åœ“éŒå‹ NAT åŸºç¤ä¸Šå¢åŠ äº†å¤–éƒ¨ä¸»æ©ŸæºåŸ å¿…é ˆæ˜¯å›ºå®šçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_port_restricted_cone_nat.png&quot; alt=&quot;p2p_full_cone_nat&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;symmetric-nat-å°ç¨±å‹-nat&quot;&gt;Symmetric NAT (å°ç¨±å‹ NAT)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;æ¯ä¸€å€‹ä¾†è‡ªç›¸åŒå…§éƒ¨ IP èˆ‡åŸ ï¼Œåˆ°ä¸€å€‹ç‰¹å®šç›®çš„åœ° IP å’ŒåŸ çš„è«‹æ±‚ï¼Œéƒ½å°æ˜ åˆ°ä¸€å€‹ç¨ç‰¹çš„å¤–éƒ¨ IP å’ŒåŸ ã€‚
åŒä¸€å…§éƒ¨ IP èˆ‡åŸ ç™¼åˆ°ä¸åŒçš„ç›®çš„åœ°å’ŒåŸ çš„è³‡è¨ŠåŒ…ï¼Œéƒ½ä½¿ç”¨ä¸åŒçš„å°æ˜ &lt;/li&gt;
  &lt;li&gt;åªæœ‰æ›¾ç¶“æ”¶åˆ°éå…§éƒ¨ä¸»æ©Ÿè³‡æ–™çš„å¤–éƒ¨ä¸»æ©Ÿï¼Œæ‰èƒ½å¤ æŠŠå°åŒ…ç™¼å›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/p2p_symmetric_nat.png&quot; alt=&quot;p2p_full_cone_nat&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Symmetric NAT ç„¡æ³•å¯¦ç¾ P2P ï¼ŒåŸå› å°±åœ¨æ–¼å°ç¨±å‹æ¯æ¬¡çš„è«‹æ±‚éƒ½æœƒå°æ‡‰åˆ°ä¸åŒçš„å¤–éƒ¨ IP å’Œ Port&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;æœ‰é—œ P2Pã€IPv4ã€NAT å°±å…ˆä»‹ç´¹åˆ°æ­¤ï¼Œä¸‹ä¸€ç¯‡æœƒä»‹ç´¹å¯¦ç¾ P2P éœ€è¦å“ªäº›å”å®šå·¥å…·ï¼ŒSTUNã€TURNã€ICE æ˜¯ä»€éº¼&lt;/p&gt;

&lt;h2 id=&quot;åƒè€ƒè³‡æº&quot;&gt;åƒè€ƒè³‡æº&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/berty-tech/berty-tech-centralized-vs-decentralized-vs-distributed-systems-2e9efd856c2&quot;&gt;Centralized vs Decentralized vs Distributed Systems&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.52im.net/thread-50-1-1.html&quot;&gt;ã€ŠP2P æŠ€æœ¯è¯¦è§£ã€‹ç³»åˆ—æ–‡ç« &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%B0%8D%E7%AD%89%E7%B6%B2%E8%B7%AF&quot;&gt;å°ç­‰ç¶²è·¯&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&quot;&gt;ç¶²è·¯ä½å€è½‰æ›&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.flaticon.com/&quot;&gt;flaticon&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="P2P" /><category term="iOS" /><category term="Android" /><category term="IPv4" /><category term="NAT" /><summary type="html">P2P x IPv4 x NAT</summary></entry><entry><title type="html">3D Graphic Engine Tips - ä¸‰è§’å½¢ x UV mapping x Vertices &amp;amp; Indices</title><link href="https://nickhuangcyh.github.io/blog/mobile/3d_graphic_tips/" rel="alternate" type="text/html" title="3D Graphic Engine Tips - ä¸‰è§’å½¢ x UV mapping x Vertices &amp;amp; Indices" /><published>2022-01-02T02:04:00+00:00</published><updated>2022-01-02T02:04:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/mobile/3d_graphic_tips</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/mobile/3d_graphic_tips/">&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å‰é™£å­åœ¨ iOS, Android ä¸Šé–‹ç™¼ AR ç›¸é—œçš„åŠŸèƒ½ï¼Œå› ç‚ºæœ¬èº«æ²’æœ‰ 3D ç¹ªåœ–çš„ç›¸é—œçŸ¥è­˜ï¼Œå¾Œä¾†ä»”ç´°ç ”ç©¶ï¼Œçµ‚æ–¼æœ‰ä¸€äº›æˆæœï¼Œé€™ç¯‡ç”¨ä¾†ç´€éŒ„æœ‰é—œ 3D ç¹ªåœ–çš„å°å°çŸ¥è­˜ï¼Œå¸Œæœ›å¯ä»¥å¹«åŠ©åˆ°å…¶ä»–äººï¼&lt;/p&gt;

&lt;h2 id=&quot;3d-åœ–å½¢ä¸–ç•Œæ‰€æœ‰ç‰©ä»¶éƒ½æ˜¯ç”±å°ä¸‰è§’å½¢æ‰€æ§‹æˆ&quot;&gt;3D åœ–å½¢ä¸–ç•Œæ‰€æœ‰ç‰©ä»¶éƒ½æ˜¯ç”±å°ä¸‰è§’å½¢æ‰€æ§‹æˆ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.researchgate.net/profile/Predrag-Novakovic-2/publication/322096576/figure/fig2/AS:631626539229214@1527602910310/3D-mesh-triangles-with-different-resolution-3D-Modelling-for-programmers-Available-at.png&quot; alt=&quot;3d_mesh&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://www.researchgate.net/figure/3D-mesh-triangles-with-different-resolution-3D-Modelling-for-programmers-Available-at_fig2_322096576&quot;&gt;https://www.researchgate.net/figure/3D-mesh-triangles-with-different-resolution-3D-Modelling-for-programmers-Available-at_fig2_322096576&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;uv-mapping&quot;&gt;UV mapping&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;å°‡ 2D åœ–åƒæŠ•å½±åˆ° 3D æ¨¡å‹è¡¨é¢é€²è¡Œ Texture æ˜ å°„çš„ 3D å»ºæ¨¡éç¨‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/0/04/UVMapping.png&quot; alt=&quot;uv_mapping&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/UV_mapping&quot;&gt;https://en.wikipedia.org/wiki/UV_mapping&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»¥ç«‹æ–¹é«”ç‚ºä¾‹ï¼Œå°‡å„é¢ Texture å£“å¹³ç‚º 2Dï¼Œåœ¨æ˜ å°„åˆ° UV åº§æ¨™ä¸­
UV åº§æ¨™ï¼ŒU ç‚ºæ©«è»¸ï¼ŒV ç‚ºç¸±è»¸ï¼Œå·¦ä¸Šç‚º(0,0)ï¼Œå³ä¸Šç‚º(1,1)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://wiki.povray.org/uploaded/4/48/RefImgBoxmap.gif&quot; alt=&quot;uv_box_coordinate&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://wiki.povray.org/content/Reference:UV_Mapping&quot;&gt;https://wiki.povray.org/content/Reference:UV_Mapping&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;vertices-and-indices&quot;&gt;Vertices and Indices&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.oreilly.com/library/view/real-time-3d-graphics/9781788629690/assets/1ccc3e64-684e-4098-b910-505346c4b396.png&quot; alt=&quot;vertices_and_indices&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://www.oreilly.com/library/view/real-time-3d-graphics/9781788629690/0e5b1b24-f1a7-414d-868b-37df694749ad.xhtml&quot;&gt;https://www.oreilly.com/library/view/real-time-3d-graphics/9781788629690/0e5b1b24-f1a7-414d-868b-37df694749ad.xhtml&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é †è‘—é ‚é»æ¨™ç¤ºå‡ºé ‚é»çš„ Indexï¼Œæ ¹æ“šè¦ç•«å‡ºçš„ä¸‰è§’å½¢ï¼Œä»¥é€†æ™‚é˜æ–¹å‘ä¾åºå¡«å…¥ Index&lt;/p&gt;

&lt;p&gt;å¦ä¸€ç¨®æ–¹å¼å¯ä»¥ç”¨&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%AE%89%E5%9F%B9%E5%AE%9A%E5%BE%8B&quot;&gt;å®‰åŸ¹å³æ‰‹å®šå‰‡&lt;/a&gt;ï¼Œæ—‹è½‰æ–¹å‘ç‚º index çš„é †åºï¼Œå¤§æ‹‡æŒ‡æŒ‡å‘æ–¹å‘ç‚ºé¢æœå‘çš„æ–¹ä½&lt;/p&gt;

&lt;p&gt;å› æ­¤åœ¨ 3D ä¸–ç•Œè¦ç•«å‡ºé›™é¢ä¸‰è§’å½¢ï¼Œcode è£¡çš„ index å¿…é ˆç‚º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[0, 2, 1, 0, 1, 2]&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[0, 2, 1]&lt;/code&gt; ç‚ºæ­£é¢ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[0, 1, 2]&lt;/code&gt; ç‚ºèƒŒé¢&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://www.oreilly.com/library/view/real-time-3d-graphics/9781788629690/0e5b1b24-f1a7-414d-868b-37df694749ad.xhtml&quot;&gt;https://www.oreilly.com/library/view/real-time-3d-graphics/9781788629690/0e5b1b24-f1a7-414d-868b-37df694749ad.xhtml&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;ç¸½çµ&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;ä¸ç®¡æ˜¯åœ¨é–‹ç™¼ iOS, Android, Webï¼Œåªè¦èˆ‡ 3D ç›¸é—œï¼Œ3D éŠæˆ², AR, VR ç­‰ç­‰éƒ½æœƒç”¨åˆ°ï¼Œæ˜¯éå¸¸å¯¦ç”¨çš„è§€å¿µ!&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Mobile" /><category term="iOS" /><category term="Android" /><category term="3D" /><category term="OpenGL" /><category term="ARKit" /><category term="ARCore" /><category term="Sceneform" /><category term="SceneKit" /><summary type="html">å¯« 3D ç¹ªåœ–ç¨‹å¼å¿…éœ€è¦çŸ¥é“çš„çŸ¥è­˜</summary></entry></feed>